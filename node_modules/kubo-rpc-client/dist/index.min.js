(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.KuboRpcClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var KuboRpcClient=(()=>{var ng=Object.create;var uo=Object.defineProperty;var og=Object.getOwnPropertyDescriptor;var sg=Object.getOwnPropertyNames;var ig=Object.getPrototypeOf,ag=Object.prototype.hasOwnProperty;var Ht=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),de=(t,e)=>{for(var r in e)uo(t,r,{get:e[r],enumerable:!0})},$u=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of sg(e))!ag.call(t,o)&&o!==r&&uo(t,o,{get:()=>e[o],enumerable:!(n=og(e,o))||n.enumerable});return t};var Mt=(t,e,r)=>(r=t!=null?ng(ig(t)):{},$u(e||!t||!t.__esModule?uo(r,"default",{value:t,enumerable:!0}):r,t)),cg=t=>$u(uo({},"__esModule",{value:!0}),t);var gd=Ht((OA,md)=>{function qx(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}md.exports=qx});var Vn=Ht(($A,Ed)=>{"use strict";function vd(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Kx(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return vd(t,r)}catch{r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),vd(new o,r)}}Ed.exports=Kx});var ch=Ht(on=>{"use strict";var x1="[object ArrayBuffer]",Pt=class t{static isArrayBuffer(e){return Object.prototype.toString.call(e)===x1}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){let n=t.toUint8Array(e),o=t.toUint8Array(r);if(n.length!==o.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==o[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(let i of r)n+=i.byteLength;let o=new Uint8Array(n),s=0;for(let i of r){let a=this.toUint8Array(i);o.set(a,s),s+=a.length}return e[e.length-1]instanceof Function?this.toView(o,e[e.length-1]):o.buffer}},Mc="string",b1=/^[0-9a-f\s]+$/i,v1=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,E1=/^[a-zA-Z0-9-_]+$/,ds=class{static fromString(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n.buffer}static toString(e){let r=Pt.toUint8Array(e),n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}},Ze=class{static toString(e,r=!1){let n=Pt.toArrayBuffer(e),o=new DataView(n),s="";for(let i=0;i<n.byteLength;i+=2){let a=o.getUint16(i,r);s+=String.fromCharCode(a)}return s}static fromString(e,r=!1){let n=new ArrayBuffer(e.length*2),o=new DataView(n);for(let s=0;s<e.length;s++)o.setUint16(s*2,e.charCodeAt(s),r);return n}},hs=class t{static isHex(e){return typeof e===Mc&&b1.test(e)}static isBase64(e){return typeof e===Mc&&v1.test(e)}static isBase64Url(e){return typeof e===Mc&&E1.test(e)}static ToString(e,r="utf8"){let n=Pt.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Ze.toString(n,!0);case"utf16":case"utf16be":return Ze.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ze.fromString(e,!0);case"utf16":case"utf16be":return Ze.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){let r=Pt.toUint8Array(e);if(typeof btoa<"u"){let n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return ds.fromString(e);case"utf16":case"utf16be":return Ze.fromString(e);case"utf16le":case"usc2":return Ze.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=t.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return ds.toString(e);case"utf16":case"utf16be":return Ze.toString(e);case"utf16le":case"usc2":return Ze.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){let r=e.length,n=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);return n.buffer}static ToBinary(e){let r=Pt.toUint8Array(e),n="";for(let o=0;o<r.length;o++)n+=String.fromCharCode(r[o]);return n}static ToHex(e){let r=Pt.toUint8Array(e),n="",o=r.length;for(let s=0;s<o;s++){let i=r[s];i<16&&(n+="0"),n+=i.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!t.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);let n=new Uint8Array(r.length/2);for(let o=0;o<r.length;o=o+2){let s=r.slice(o,o+2);n[o/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return Ze.toString(e,r)}static FromUtf16String(e,r=!1){return Ze.fromString(e,r)}static Base64Padding(e){let r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}};hs.DEFAULT_UTF8_ENCODING="utf8";function B1(t,...e){let r=arguments[0];for(let n=1;n<arguments.length;n++){let o=arguments[n];for(let s in o)r[s]=o[s]}return r}function A1(...t){let e=t.map(o=>o.byteLength).reduce((o,s)=>o+s),r=new Uint8Array(e),n=0;return t.map(o=>new Uint8Array(o)).forEach(o=>{for(let s of o)r[n++]=s}),r.buffer}function S1(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let o=0;o<t.byteLength;o++)if(r[o]!==n[o])return!1;return!0}on.BufferSourceConverter=Pt;on.Convert=hs;on.assign=B1;on.combine=A1;on.isEqual=S1});var dm=Ht((iU,fm)=>{"use strict";fm.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var wm=Ht((gm,ym)=>{"use strict";var gi=dm(),{hasOwnProperty:pm}=Object.prototype,{propertyIsEnumerable:g2}=Object,dn=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),y2=gm,hm={concatArrays:!1,ignoreUndefined:!1},yi=t=>{let e=[];for(let r in t)pm.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)g2.call(t,n)&&e.push(n)}return e};function hn(t){return Array.isArray(t)?w2(t):gi(t)?x2(t):t}function w2(t){let e=t.slice(0,0);return yi(t).forEach(r=>{dn(e,r,hn(t[r]))}),e}function x2(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return yi(t).forEach(r=>{dn(e,r,hn(t[r]))}),e}var mm=(t,e,r,n)=>(r.forEach(o=>{typeof e[o]>"u"&&n.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?dn(t,o,gu(t[o],e[o],n)):dn(t,o,hn(e[o])))}),t),b2=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)pm.call(s,a)&&(i.push(String(a)),s===t?dn(n,o++,s[a]):dn(n,o++,hn(s[a])));n=mm(n,s,yi(s).filter(a=>!i.includes(a)),r)}),n};function gu(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?b2(t,e,r):!gi(e)||!gi(t)?hn(e):mm(t,e,yi(e),r)}ym.exports=function(...t){let e=gu(hn(hm),this!==y2&&this||{},hm),r={_:{}};for(let n of t)if(n!==void 0){if(!gi(n))throw new TypeError("`"+n+"` is not an Option Object");r=gu(r,{_:n},e)}return r._}});var xu=Ht((dU,km)=>{"use strict";var E2=typeof navigator<"u"&&navigator.product==="ReactNative";function B2(){return E2?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var io=self.URL,Sm=B2(),wu=class{constructor(e="",r=Sm){this.super=new io(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return io.createObjectURL(e)}static revokeObjectURL(e){io.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function A2(t){if(typeof t=="string")return new io(t).toString();if(!(t instanceof io)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",s=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",f=t.pathname||"",u=t.path||f+a;return`${o}${e||r}${s||i+n}${u}${c}`}}km.exports={URLWithLegacySupport:wu,URLSearchParams:self.URLSearchParams,defaultBase:Sm,format:A2}});var Um=Ht((hU,Im)=>{"use strict";var{URLWithLegacySupport:Cm,format:S2}=xu();Im.exports=(t,e={},r={},n)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new Cm(t)}catch{s={}}let i=Object.assign({},e,{protocol:o||s.protocol,host:e.host||s.host});return new Cm(t,S2(i)).toString()}});var Nm=Ht((pU,Tm)=>{"use strict";var{URLWithLegacySupport:k2,format:C2,URLSearchParams:I2,defaultBase:U2}=xu(),T2=Um();Tm.exports={URL:k2,URLSearchParams:I2,format:C2,relative:T2,defaultBase:U2}});var cv={};de(cv,{CID:()=>A,RoutingEventTypes:()=>cu,RoutingMessageType:()=>uu,create:()=>iv,createBitswap:()=>tu,createBlock:()=>ru,createBootstrap:()=>nu,createConfig:()=>ou,createDAG:()=>au,createDHT:()=>lu,createDiag:()=>fu,createFiles:()=>hu,createKey:()=>pu,createKuboRPCClient:()=>iv,createLog:()=>Au,createName:()=>Su,createObject:()=>ku,createPin:()=>Cu,createPubsub:()=>Iu,createRefs:()=>Uu,createRepo:()=>Tu,createRouting:()=>Nu,createStats:()=>Pu,createSwarm:()=>Ru,multiaddr:()=>re,readURLContent:()=>W0,urlSource:()=>av});var Vi={};de(Vi,{base58btc:()=>se,base58flickr:()=>pg});var lv=new Uint8Array(0);function ju(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Qe(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function zu(t){return new TextEncoder().encode(t)}function qu(t){return new TextDecoder().decode(t)}function ug(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,m=0,v=0,k=g.length;v!==k&&g[v]===0;)v++,w++;for(var y=(k-v)*u+1>>>0,C=new Uint8Array(y);v!==k;){for(var D=g[v],_=0,U=y-1;(D!==0||_<m)&&U!==-1;U--,_++)D+=256*C[U]>>>0,C[U]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");m=_,v++}for(var T=y-m;T!==y&&C[T]===0;)T++;for(var P=c.repeat(w);T<y;++T)P+=t.charAt(C[T]);return P}function p(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var m=0,v=0;g[w]===c;)m++,w++;for(var k=(g.length-w)*f+1>>>0,y=new Uint8Array(k);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var D=0,_=k-1;(C!==0||D<v)&&_!==-1;_--,D++)C+=a*y[_]>>>0,y[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");v=D,w++}if(g[w]!==" "){for(var U=k-v;U!==k&&y[U]===0;)U++;for(var T=new Uint8Array(m+(k-U)),P=m;U!==k;)T[P++]=y[U++];return T}}}function b(g){var w=p(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:b}}var lg=ug,fg=lg,Gu=fg;var _i=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Li=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){this.name=e,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wu(this,e)}},Di=class{decoders;constructor(e){this.decoders=e}or(e){return Wu(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Wu(t,e){return new Di({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var Oi=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new _i(e,r,n),this.decoder=new Li(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Sr({name:t,prefix:e,encode:r,decode:n}){return new Oi(t,e,r,n)}function $t({name:t,prefix:e,alphabet:r}){let{encode:n,decode:o}=Gu(r,t);return Sr({prefix:e,name:t,encode:n,decode:s=>Qe(o(s))})}function dg(t,e,r,n){let o={};for(let u=0;u<e.length;++u)o[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,f=0;for(let u=0;u<s;++u){let l=o[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[f++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return i}function hg(t,e,r){let n=e[e.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],i+=8;i>r;)i-=r,s+=e[o&a>>i];if(i!==0&&(s+=e[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function fe({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Sr({prefix:e,name:t,encode(o){return hg(o,n,r)},decode(o){return dg(o,n,r,t)}})}var se=$t({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pg=$t({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fi={};de(Fi,{base32:()=>et,base32hex:()=>wg,base32hexpad:()=>bg,base32hexpadupper:()=>vg,base32hexupper:()=>xg,base32pad:()=>gg,base32padupper:()=>yg,base32upper:()=>mg,base32z:()=>Eg});var et=fe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mg=fe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gg=fe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yg=fe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wg=fe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xg=fe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bg=fe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vg=fe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Eg=fe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Hi={};de(Hi,{base36:()=>bn,base36upper:()=>Bg});var bn=$t({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bg=$t({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ag=Xu,Ju=128,Sg=127,kg=~Sg,Cg=Math.pow(2,31);function Xu(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Cg;)e[r++]=t&255|Ju,t/=128;for(;t&kg;)e[r++]=t&255|Ju,t>>>=7;return e[r]=t|0,Xu.bytes=r-n+1,e}var Ig=Mi,Ug=128,Zu=127;function Mi(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a)throw Mi.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&Zu)<<o:(i&Zu)*Math.pow(2,o),o+=7}while(i>=Ug);return Mi.bytes=s-n,r}var Tg=Math.pow(2,7),Ng=Math.pow(2,14),Pg=Math.pow(2,21),Rg=Math.pow(2,28),_g=Math.pow(2,35),Lg=Math.pow(2,42),Dg=Math.pow(2,49),Og=Math.pow(2,56),Vg=Math.pow(2,63),Fg=function(t){return t<Tg?1:t<Ng?2:t<Pg?3:t<Rg?4:t<_g?5:t<Lg?6:t<Dg?7:t<Og?8:t<Vg?9:10},Hg={encode:Ag,decode:Ig,encodingLength:Fg},Mg=Hg,vn=Mg;function En(t,e=0){return[vn.decode(t,e),vn.decode.bytes]}function kr(t,e,r=0){return vn.encode(t,e,r),e}function Cr(t){return vn.encodingLength(t)}function tt(t,e){let r=e.byteLength,n=Cr(t),o=n+Cr(r),s=new Uint8Array(o+r);return kr(t,s,0),kr(r,s,n),s.set(e,o),new Ir(t,r,e,s)}function ir(t){let e=Qe(t),[r,n]=En(e),[o,s]=En(e.subarray(n)),i=e.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Ir(r,o,i,e)}function Yu(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&ju(t.bytes,r.bytes)}}var Ir=class{code;size;digest;bytes;constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}};function Qu(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return jg(r,$i(t),e??se.encoder);default:return zg(r,$i(t),e??et.encoder)}}var el=new WeakMap;function $i(t){let e=el.get(t);if(e==null){let r=new Map;return el.set(t,r),r}return e}var A=class t{code;version;multihash;bytes;"/";constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Bn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==qg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=tt(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Yu(e.multihash,n.multihash)}toString(e){return Qu(this,e)}toJSON(){return{"/":Qu(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new t(n,o,s,i??tl(n,o,s.bytes))}else if(r[Kg]===!0){let{version:n,multihash:o,code:s}=r,i=ir(o);return t.create(n,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Bn)throw new Error(`Version 0 CID must use dag-pb (code: ${Bn}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let o=tl(e,r,n.bytes);return new t(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Bn,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,o=Qe(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new Ir(r.multihashCode,r.digestSize,s,o);return[r.version===0?t.createV0(i):t.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,p]=En(e.subarray(r));return r+=p,l},o=n(),s=Bn;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),f=r+c,u=f-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,o]=$g(e,r),s=t.decode(o);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return $i(s).set(n,e),s}};function $g(t,e){switch(t[0]){case"Q":{let r=e??se;return[se.prefix,r.decode(`${se.prefix}${t}`)]}case se.prefix:{let r=e??se;return[se.prefix,r.decode(t)]}case et.prefix:{let r=e??et;return[et.prefix,r.decode(t)]}case bn.prefix:{let r=e??bn;return[bn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function jg(t,e,r){let{prefix:n}=r;if(n!==se.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o}function zg(t,e,r){let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o}var Bn=112,qg=18;function tl(t,e,r){let n=Cr(t),o=n+Cr(e),s=new Uint8Array(o+r.byteLength);return kr(t,s,0),kr(e,s,n),s.set(r,o),s}var Kg=Symbol.for("@ipld/js-cid/CID");function qe(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var ji={};de(ji,{base10:()=>Gg});var Gg=$t({prefix:"9",name:"base10",alphabet:"0123456789"});var zi={};de(zi,{base16:()=>Wg,base16upper:()=>Jg});var Wg=fe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jg=fe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qi={};de(qi,{base2:()=>Zg});var Zg=fe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ki={};de(Ki,{base256emoji:()=>ty});var rl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Xg=rl.reduce((t,e,r)=>(t[r]=e,t),[]),Yg=rl.reduce((t,e,r)=>{let n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function Qg(t){return t.reduce((e,r)=>(e+=Xg[r],e),"")}function ey(t){let e=[];for(let r of t){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=Yg[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(o)}return new Uint8Array(e)}var ty=Sr({prefix:"\u{1F680}",name:"base256emoji",encode:Qg,decode:ey});var Gi={};de(Gi,{base64:()=>Ur,base64pad:()=>ry,base64url:()=>An,base64urlpad:()=>ny});var Ur=fe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ry=fe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),An=fe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ny=fe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Wi={};de(Wi,{base8:()=>oy});var oy=fe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ji={};de(Ji,{identity:()=>sy});var sy=Sr({prefix:"\0",name:"identity",encode:t=>qu(t),decode:t=>zu(t)});var Zi={};de(Zi,{code:()=>uy,decode:()=>fy,encode:()=>ly,name:()=>cy});var iy=new TextEncoder,ay=new TextDecoder,cy="json",uy=512;function ly(t){return iy.encode(JSON.stringify(t))}function fy(t){return JSON.parse(ay.decode(t))}var Xi={};de(Xi,{code:()=>hy,decode:()=>my,encode:()=>py,name:()=>dy});var dy="raw",hy=85;function py(t){return Qe(t)}function my(t){return Qe(t)}var Yi={};de(Yi,{identity:()=>Ke});var nl=0,gy="identity",ol=Qe;function yy(t){return tt(nl,ol(t))}var Ke={code:nl,name:gy,encode:ol,digest:yy};var ta={};de(ta,{sha256:()=>Sn,sha512:()=>wy});function ea({name:t,code:e,encode:r}){return new Qi(t,e,r)}var Qi=class{name;code;encode;constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?tt(this.code,r):r.then(n=>tt(this.code,n))}else throw Error("Unknown type, must be binary type")}};function il(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}var Sn=ea({name:"sha2-256",code:18,encode:il("SHA-256")}),wy=ea({name:"sha2-512",code:19,encode:il("SHA-512")});var cr={...Ji,...qi,...Wi,...ji,...zi,...Fi,...Hi,...Vi,...Gi,...Ki},al={...ta,...Yi},cl={raw:Xi,json:Zi};function rt(t=0){return new Uint8Array(t)}function ll(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var ul=ll("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ra=ll("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=rt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),xy={utf8:ul,"utf-8":ul,hex:cr.base16,latin1:ra,ascii:ra,binary:ra,...cr},fo=xy;function ee(t,e="utf8"){let r=fo[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var by=Math.pow(2,7),vy=Math.pow(2,14),Ey=Math.pow(2,21),na=Math.pow(2,28),oa=Math.pow(2,35),sa=Math.pow(2,42),ia=Math.pow(2,49),Y=128,Ce=127;function Le(t){if(t<by)return 1;if(t<vy)return 2;if(t<Ey)return 3;if(t<na)return 4;if(t<oa)return 5;if(t<sa)return 6;if(t<ia)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function aa(t,e,r=0){switch(Le(t)){case 8:e[r++]=t&255|Y,t/=128;case 7:e[r++]=t&255|Y,t/=128;case 6:e[r++]=t&255|Y,t/=128;case 5:e[r++]=t&255|Y,t/=128;case 4:e[r++]=t&255|Y,t>>>=7;case 3:e[r++]=t&255|Y,t>>>=7;case 2:e[r++]=t&255|Y,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function By(t,e,r=0){switch(Le(t)){case 8:e.set(r++,t&255|Y),t/=128;case 7:e.set(r++,t&255|Y),t/=128;case 6:e.set(r++,t&255|Y),t/=128;case 5:e.set(r++,t&255|Y),t/=128;case 4:e.set(r++,t&255|Y),t>>>=7;case 3:e.set(r++,t&255|Y),t>>>=7;case 2:e.set(r++,t&255|Y),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function ca(t,e){let r=t[e],n=0;if(n+=r&Ce,r<Y||(r=t[e+1],n+=(r&Ce)<<7,r<Y)||(r=t[e+2],n+=(r&Ce)<<14,r<Y)||(r=t[e+3],n+=(r&Ce)<<21,r<Y)||(r=t[e+4],n+=(r&Ce)*na,r<Y)||(r=t[e+5],n+=(r&Ce)*oa,r<Y)||(r=t[e+6],n+=(r&Ce)*sa,r<Y)||(r=t[e+7],n+=(r&Ce)*ia,r<Y))return n;throw new RangeError("Could not decode varint")}function Ay(t,e){let r=t.get(e),n=0;if(n+=r&Ce,r<Y||(r=t.get(e+1),n+=(r&Ce)<<7,r<Y)||(r=t.get(e+2),n+=(r&Ce)<<14,r<Y)||(r=t.get(e+3),n+=(r&Ce)<<21,r<Y)||(r=t.get(e+4),n+=(r&Ce)*na,r<Y)||(r=t.get(e+5),n+=(r&Ce)*oa,r<Y)||(r=t.get(e+6),n+=(r&Ce)*sa,r<Y)||(r=t.get(e+7),n+=(r&Ce)*ia,r<Y))return n;throw new RangeError("Could not decode varint")}function Tr(t,e,r=0){return e==null&&(e=rt(Le(t))),e instanceof Uint8Array?aa(t,e,r):By(t,e,r)}function ur(t,e=0){return t instanceof Uint8Array?ca(t,e):Ay(t,e)}function mt(t,e){e==null&&(e=t.reduce((o,s)=>o+s.length,0));let r=rt(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var ho=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){let r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",f=2**(8*o)-1;for(;;){let u=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let p=Number.parseInt(l,e);if(!Number.isNaN(p))return p});if(u===void 0)break;if(s*=e,s+=u,s>f||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let r=0;r<e.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){let e=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2],r[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];r[o]=s>>8,r[o+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=e(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=e(s.subarray(0,i));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var dl=45,Sy=15,Nr=new ho;function ua(t){if(!(t.length>Sy))return Nr.new(t).parseWith(()=>Nr.readIPv4Addr())}function la(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>dl))return Nr.new(t).parseWith(()=>Nr.readIPv6Addr())}function po(t,e=!1){if(t.includes("%")&&(t=t.split("%")[0]),t.length>dl)return;let r=Nr.new(t).parseWith(()=>Nr.readIPAddr());if(r)return e&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}var gE=parseInt("0xFFFF",16),yE=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function te(t,e="utf8"){let r=fo[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function ml(t){return!!ua(t)}function gl(t){return!!la(t)}function mo(t){return!!po(t)}var yl=ml,Ty=gl,fa=function(t){let e=0;if(t=t.toString().trim(),yl(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Ty(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let s=yl(r[n]),i;s&&(i=fa(r[n]),r[n]=ee(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,ee(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(e+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[e++]=s>>8&255,o[e++]=s&255}return o}throw new Error("invalid ip address")},wl=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(t[e+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(e+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Pr={},da={},Py=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,-1,"http-path"],[777,-1,"memory"]];Py.forEach(t=>{let e=Ry(...t);da[e.code]=e,Pr[e.name]=e});function Ry(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:!!n,path:!!o}}function j(t){if(typeof t=="number"){if(da[t]!=null)return da[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Pr[t]!=null)return Pr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var rB=j("ip4"),nB=j("ip6"),oB=j("ipcidr");function ga(t,e){switch(j(t).code){case 4:case 41:return Ly(e);case 42:return ma(e);case 43:return ee(e,"base10");case 6:case 273:case 33:case 132:return vl(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ma(e);case 421:return Fy(e);case 444:return bl(e);case 445:return bl(e);case 466:return Vy(e);case 481:return globalThis.encodeURIComponent(ma(e));default:return ee(e,"base16")}}function ya(t,e){switch(j(t).code){case 4:return xl(e);case 41:return xl(e);case 42:return pa(e);case 43:return te(e,"base10");case 6:case 273:case 33:case 132:return wa(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return pa(e);case 421:return Dy(e);case 444:return Hy(e);case 445:return My(e);case 466:return Oy(e);case 481:return pa(globalThis.decodeURIComponent(e));default:return te(e,"base16")}}var ha=Object.values(cr).map(t=>t.decoder),_y=(function(){let t=ha[0].or(ha[1]);return ha.slice(2).forEach(e=>t=t.or(e)),t})();function xl(t){if(!mo(t))throw new Error("invalid ip address");return fa(t)}function Ly(t){let e=wl(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!mo(e))throw new Error("invalid ip address");return e}function wa(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function vl(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function pa(t){let e=te(t),r=Uint8Array.from(Tr(e.length));return mt([r,e],r.length+e.length)}function ma(t){let e=ur(t);if(t=t.slice(Le(e)),t.length!==e)throw new Error("inconsistent lengths");return ee(t)}function Dy(t){let e;t[0]==="Q"||t[0]==="1"?e=ir(se.decode(`z${t}`)).bytes:e=A.parse(t).multihash.bytes;let r=Uint8Array.from(Tr(e.length));return mt([r,e],r.length+e.length)}function Oy(t){let e=_y.decode(t),r=Uint8Array.from(Tr(e.length));return mt([r,e],r.length+e.length)}function Vy(t){let e=ur(t),r=t.slice(Le(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+ee(r,"base64url")}function Fy(t){let e=ur(t),r=t.slice(Le(e));if(r.length!==e)throw new Error("inconsistent lengths");return ee(r,"base58btc")}function Hy(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=et.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=wa(n);return mt([r,o],r.length+o.length)}function My(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=et.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=wa(n);return mt([r,o],r.length+o.length)}function bl(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=ee(e,"base32"),o=vl(r);return`${n}:${o}`}function El(t){t=xa(t);let e=[],r=[],n=null,o=t.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<o.length;s++){let i=o[s],a=j(i);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(s++,s>=o.length)throw new go("invalid address: "+t);if(a.path===!0){n=xa(o.slice(s).join("/")),e.push([a.code,ya(a.code,n)]),r.push([a.code,n]);break}let c=ya(a.code,o[s]);e.push([a.code,c]),r.push([a.code,ga(a.code,c)])}return{string:Bl(r),bytes:va(e),tuples:e,stringTuples:r,path:n}}function ba(t){let e=[],r=[],n=null,o=0;for(;o<t.length;){let s=ur(t,o),i=Le(s),a=j(s),c=$y(a,t.slice(o+i));if(c===0){e.push([s]),r.push([s]),o+=i;continue}let f=t.slice(o+i,o+i+c);if(o+=c+i,o>t.length)throw new go("Invalid address Uint8Array: "+ee(t,"base16"));e.push([s,f]);let u=ga(s,f);if(r.push([s,u]),a.path===!0){n=u;break}}return{bytes:Uint8Array.from(t),string:Bl(r),tuples:e,stringTuples:r,path:n}}function Bl(t){let e=[];return t.map(r=>{let n=j(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),xa(e.join("/"))}function va(t){return mt(t.map(e=>{let r=j(e[0]),n=Uint8Array.from(Tr(r.code));return e.length>1&&e[1]!=null&&(n=mt([n,e[1]])),n}))}function $y(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{let r=ur(e instanceof Uint8Array?e:Uint8Array.from(e));return r+Le(r)}}function xa(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}var go=class extends Error{static name="ParseError";name="ParseError";constructor(e){super(`Error parsing address: ${e}`)}};var jy=Symbol.for("nodejs.util.inspect.custom"),Ba=Symbol.for("@multiformats/js-multiaddr/multiaddr"),zy=[j("dns").code,j("dns4").code,j("dns6").code,j("dnsaddr").code],Ea=class extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}},yo=class t{bytes;#t;#e;#r;#n;[Ba]=!0;constructor(e){e==null&&(e="");let r;if(e instanceof Uint8Array)r=ba(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=El(e)}else if(lr(e))r=ba(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#e=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let e,r,n,o,s="",i=j("tcp"),a=j("udp"),c=j("ip4"),f=j("ip6"),u=j("dns6"),l=j("ip6zone");for(let[b,g]of this.stringTuples())b===l.code&&(s=`%${g??""}`),zy.includes(b)&&(r=i.name==="tcp"?"tcp":"udp",o=443,n=`${g??""}${s}`,e=b===u.code?6:4),(b===i.code||b===a.code)&&(r=j(b).name==="tcp"?"tcp":"udp",o=parseInt(g??"")),(b===c.code||b===f.code)&&(r=j(b).name==="tcp"?"tcp":"udp",n=`${g??""}${s}`,e=b===f.code?6:4);if(e==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:o}}protos(){return this.#e.map(([e])=>Object.assign({},j(e)))}protoCodes(){return this.#e.map(([e])=>e)}protoNames(){return this.#e.map(([e])=>j(e).name)}tuples(){return this.#e.map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return this.#r.map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new t(e),new t(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new t(n.slice(0,o))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new t(va(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,o])=>{n===Pr.p2p.code&&e.push([n,o]),n===Pr["p2p-circuit"].code&&(e=[])});let r=e.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?ee(se.decode(`z${n}`),"base58btc"):ee(A.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(e){return qe(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Al.get(r.name);if(n==null)throw new Ea(`no available resolver for ${r.name}`);return(await n(this,e)).map(s=>re(s))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[jy](){return`Multiaddr(${this.#t})`}};var Al=new Map;function lr(t){return!!t?.[Ba]}function re(t){return new yo(t)}var Po={};de(Po,{code:()=>kw,decode:()=>La,decodeOptions:()=>Aw,encode:()=>_a,encodeOptions:()=>Ew,name:()=>Sw,toByteView:()=>Tf});var qy=["string","number","bigint","symbol"],Ky=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Sl(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(qy.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Gy(t))return"Buffer";let r=Wy(t);return r||"Object"}function Gy(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Wy(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(Ky.includes(e))return e}var d=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var E=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Rr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Jy=new TextDecoder,Zy=new TextEncoder;function wo(t){return Rr&&globalThis.Buffer.isBuffer(t)}function kn(t){return t instanceof Uint8Array?wo(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ul=Rr?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Cl(t,e,r):(t,e,r)=>r-e>64?Jy.decode(t.subarray(e,r)):Cl(t,e,r),xo=Rr?t=>t.length>64?globalThis.Buffer.from(t):kl(t):t=>t.length>64?Zy.encode(t):kl(t),gt=t=>Uint8Array.from(t),_r=Rr?(t,e,r)=>wo(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Tl=Rr?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),kn(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Nl=Rr?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Pl(t,e){if(wo(t)&&wo(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function kl(t){let e=[],r=0;for(let n=0;n<t.length;n++){let o=t.charCodeAt(n);o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128)}return e}function Cl(t,e,r){let n=[];for(;e<r;){let o=t[e],s=null,i=o>239?4:o>223?3:o>191?2:1;if(e+i<=r){let a,c,f,u;switch(i){case 1:o<128&&(s=o);break;case 2:a=t[e+1],(a&192)===128&&(u=(o&31)<<6|a&63,u>127&&(s=u));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(u=(o&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:a=t[e+1],c=t[e+2],f=t[e+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(o&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=i}return Aa(n)}var Il=4096;function Aa(t){let e=t.length;if(e<=Il)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Il));return r}var Xy=256,Cn=class{constructor(e=Xy){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Nl(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=_r(n,0,this.cursor)}else r=Tl(this.chunks,this.cursor);return e&&this.reset(),r}};var O="CBOR decode error:",Bt="CBOR encode error:",In=[];In[23]=1;In[24]=2;In[25]=3;In[26]=5;In[27]=9;function At(t,e,r){if(t.length-e<r)throw new Error(`${O} not enough data for type`)}var xe=[24,256,65536,4294967296,BigInt("18446744073709551616")];function He(t,e,r){At(t,e,1);let n=t[e];if(r.strict===!0&&n<xe[0])throw new Error(`${O} integer encoded in more bytes than necessary (strict decode)`);return n}function Me(t,e,r){At(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<xe[1])throw new Error(`${O} integer encoded in more bytes than necessary (strict decode)`);return n}function $e(t,e,r){At(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<xe[2])throw new Error(`${O} integer encoded in more bytes than necessary (strict decode)`);return n}function je(t,e,r){At(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<xe[3])throw new Error(`${O} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${O} integers outside of the safe integer range are not supported`)}function Rl(t,e,r,n){return new E(d.uint,He(t,e+1,n),2)}function _l(t,e,r,n){return new E(d.uint,Me(t,e+1,n),3)}function Ll(t,e,r,n){return new E(d.uint,$e(t,e+1,n),5)}function Dl(t,e,r,n){return new E(d.uint,je(t,e+1,n),9)}function Ge(t,e){return Be(t,0,e.value)}function Be(t,e,r){if(r<xe[0]){let n=Number(r);t.push([e|n])}else if(r<xe[1]){let n=Number(r);t.push([e|24,n])}else if(r<xe[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<xe[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<xe[4]){let o=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,t.push(o)}else throw new Error(`${O} encountered BigInt larger than allowable range`)}}Ge.encodedSize=function(e){return Be.encodedSize(e.value)};Be.encodedSize=function(e){return e<xe[0]?1:e<xe[1]?2:e<xe[2]?3:e<xe[3]?5:9};Ge.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Ol(t,e,r,n){return new E(d.negint,-1-He(t,e+1,n),2)}function Vl(t,e,r,n){return new E(d.negint,-1-Me(t,e+1,n),3)}function Fl(t,e,r,n){return new E(d.negint,-1-$e(t,e+1,n),5)}var Sa=BigInt(-1),Hl=BigInt(1);function Ml(t,e,r,n){let o=je(t,e+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new E(d.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${O} integers outside of the safe integer range are not supported`);return new E(d.negint,Sa-BigInt(o),9)}function bo(t,e){let r=e.value,n=typeof r=="bigint"?r*Sa-Hl:r*-1-1;Be(t,e.type.majorEncoded,n)}bo.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Sa-Hl:r*-1-1;return n<xe[0]?1:n<xe[1]?2:n<xe[2]?3:n<xe[3]?5:9};bo.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Un(t,e,r,n){At(t,e,r+n);let o=_r(t,e+r,e+r+n);return new E(d.bytes,o,r+n)}function $l(t,e,r,n){return Un(t,e,1,r)}function jl(t,e,r,n){return Un(t,e,2,He(t,e+1,n))}function zl(t,e,r,n){return Un(t,e,3,Me(t,e+1,n))}function ql(t,e,r,n){return Un(t,e,5,$e(t,e+1,n))}function Kl(t,e,r,n){let o=je(t,e+1,n);if(typeof o=="bigint")throw new Error(`${O} 64-bit integer bytes lengths not supported`);return Un(t,e,9,o)}function vo(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===d.string?xo(t.value):t.value),t.encodedBytes}function Lr(t,e){let r=vo(e);Be(t,e.type.majorEncoded,r.length),t.push(r)}Lr.encodedSize=function(e){let r=vo(e);return Be.encodedSize(r.length)+r.length};Lr.compareTokens=function(e,r){return Qy(vo(e),vo(r))};function Qy(t,e){return t.length<e.length?-1:t.length>e.length?1:Pl(t,e)}function Tn(t,e,r,n,o){let s=r+n;At(t,e,s);let i=new E(d.string,Ul(t,e+r,e+s),s);return o.retainStringBytes===!0&&(i.byteValue=_r(t,e+r,e+s)),i}function Gl(t,e,r,n){return Tn(t,e,1,r,n)}function Wl(t,e,r,n){return Tn(t,e,2,He(t,e+1,n),n)}function Jl(t,e,r,n){return Tn(t,e,3,Me(t,e+1,n),n)}function Zl(t,e,r,n){return Tn(t,e,5,$e(t,e+1,n),n)}function Xl(t,e,r,n){let o=je(t,e+1,n);if(typeof o=="bigint")throw new Error(`${O} 64-bit integer string lengths not supported`);return Tn(t,e,9,o,n)}var Yl=Lr;function Dr(t,e,r,n){return new E(d.array,n,r)}function Ql(t,e,r,n){return Dr(t,e,1,r)}function ef(t,e,r,n){return Dr(t,e,2,He(t,e+1,n))}function tf(t,e,r,n){return Dr(t,e,3,Me(t,e+1,n))}function rf(t,e,r,n){return Dr(t,e,5,$e(t,e+1,n))}function nf(t,e,r,n){let o=je(t,e+1,n);if(typeof o=="bigint")throw new Error(`${O} 64-bit integer array lengths not supported`);return Dr(t,e,9,o)}function of(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${O} indefinite length items not allowed`);return Dr(t,e,1,1/0)}function Eo(t,e){Be(t,d.array.majorEncoded,e.value)}Eo.compareTokens=Ge.compareTokens;Eo.encodedSize=function(e){return Be.encodedSize(e.value)};function Or(t,e,r,n){return new E(d.map,n,r)}function sf(t,e,r,n){return Or(t,e,1,r)}function af(t,e,r,n){return Or(t,e,2,He(t,e+1,n))}function cf(t,e,r,n){return Or(t,e,3,Me(t,e+1,n))}function uf(t,e,r,n){return Or(t,e,5,$e(t,e+1,n))}function lf(t,e,r,n){let o=je(t,e+1,n);if(typeof o=="bigint")throw new Error(`${O} 64-bit integer map lengths not supported`);return Or(t,e,9,o)}function ff(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${O} indefinite length items not allowed`);return Or(t,e,1,1/0)}function Bo(t,e){Be(t,d.map.majorEncoded,e.value)}Bo.compareTokens=Ge.compareTokens;Bo.encodedSize=function(e){return Be.encodedSize(e.value)};function df(t,e,r,n){return new E(d.tag,r,1)}function hf(t,e,r,n){return new E(d.tag,He(t,e+1,n),2)}function pf(t,e,r,n){return new E(d.tag,Me(t,e+1,n),3)}function mf(t,e,r,n){return new E(d.tag,$e(t,e+1,n),5)}function gf(t,e,r,n){return new E(d.tag,je(t,e+1,n),9)}function Ao(t,e){Be(t,d.tag.majorEncoded,e.value)}Ao.compareTokens=Ge.compareTokens;Ao.encodedSize=function(e){return Be.encodedSize(e.value)};var sw=20,iw=21,aw=22,cw=23;function yf(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${O} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new E(d.null,null,1):new E(d.undefined,void 0,1)}function wf(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${O} indefinite length items not allowed`);return new E(d.break,void 0,1)}function ka(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${O} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${O} Infinity values are not supported`)}return new E(d.float,t,e)}function xf(t,e,r,n){return ka(Ca(t,e+1),3,n)}function bf(t,e,r,n){return ka(Ia(t,e+1),5,n)}function vf(t,e,r,n){return ka(Sf(t,e+1),9,n)}function So(t,e,r){let n=e.value;if(n===!1)t.push([d.float.majorEncoded|sw]);else if(n===!0)t.push([d.float.majorEncoded|iw]);else if(n===null)t.push([d.float.majorEncoded|aw]);else if(n===void 0)t.push([d.float.majorEncoded|cw]);else{let o,s=!1;(!r||r.float64!==!0)&&(Bf(n),o=Ca(nt,1),n===o||Number.isNaN(n)?(nt[0]=249,t.push(nt.slice(0,3)),s=!0):(Af(n),o=Ia(nt,1),n===o&&(nt[0]=250,t.push(nt.slice(0,5)),s=!0))),s||(uw(n),o=Sf(nt,1),nt[0]=251,t.push(nt.slice(0,9)))}}So.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Bf(n);let o=Ca(nt,1);if(n===o||Number.isNaN(n))return 3;if(Af(n),o=Ia(nt,1),n===o)return 5}return 9};var Ef=new ArrayBuffer(9),We=new DataView(Ef,1),nt=new Uint8Array(Ef,0);function Bf(t){if(t===1/0)We.setUint16(0,31744,!1);else if(t===-1/0)We.setUint16(0,64512,!1);else if(Number.isNaN(t))We.setUint16(0,32256,!1);else{We.setFloat32(0,t);let e=We.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)We.setUint16(0,31744,!1);else if(r===0)We.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?We.setUint16(0,0):o<-14?We.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):We.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Ca(t,e){if(t.length-e<2)throw new Error(`${O} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function Af(t){We.setFloat32(0,t,!1)}function Ia(t,e){if(t.length-e<4)throw new Error(`${O} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function uw(t){We.setFloat64(0,t,!1)}function Sf(t,e){if(t.length-e<8)throw new Error(`${O} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}So.compareTokens=Ge.compareTokens;function X(t,e,r){throw new Error(`${O} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function ko(t){return()=>{throw new Error(`${O} ${t}`)}}var I=[];for(let t=0;t<=23;t++)I[t]=X;I[24]=Rl;I[25]=_l;I[26]=Ll;I[27]=Dl;I[28]=X;I[29]=X;I[30]=X;I[31]=X;for(let t=32;t<=55;t++)I[t]=X;I[56]=Ol;I[57]=Vl;I[58]=Fl;I[59]=Ml;I[60]=X;I[61]=X;I[62]=X;I[63]=X;for(let t=64;t<=87;t++)I[t]=$l;I[88]=jl;I[89]=zl;I[90]=ql;I[91]=Kl;I[92]=X;I[93]=X;I[94]=X;I[95]=ko("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)I[t]=Gl;I[120]=Wl;I[121]=Jl;I[122]=Zl;I[123]=Xl;I[124]=X;I[125]=X;I[126]=X;I[127]=ko("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)I[t]=Ql;I[152]=ef;I[153]=tf;I[154]=rf;I[155]=nf;I[156]=X;I[157]=X;I[158]=X;I[159]=of;for(let t=160;t<=183;t++)I[t]=sf;I[184]=af;I[185]=cf;I[186]=uf;I[187]=lf;I[188]=X;I[189]=X;I[190]=X;I[191]=ff;for(let t=192;t<=215;t++)I[t]=df;I[216]=hf;I[217]=pf;I[218]=mf;I[219]=gf;I[220]=X;I[221]=X;I[222]=X;I[223]=X;for(let t=224;t<=243;t++)I[t]=ko("simple values are not supported");I[244]=X;I[245]=X;I[246]=X;I[247]=yf;I[248]=ko("simple values are not supported");I[249]=xf;I[250]=bf;I[251]=vf;I[252]=X;I[253]=X;I[254]=X;I[255]=wf;var ot=[];for(let t=0;t<24;t++)ot[t]=new E(d.uint,t,1);for(let t=-1;t>=-24;t--)ot[31-t]=new E(d.negint,t,1);ot[64]=new E(d.bytes,new Uint8Array(0),1);ot[96]=new E(d.string,"",1);ot[128]=new E(d.array,0,1);ot[160]=new E(d.map,0,1);ot[244]=new E(d.false,!1,1);ot[245]=new E(d.true,!0,1);ot[246]=new E(d.null,null,1);function kf(t){switch(t.type){case d.false:return gt([244]);case d.true:return gt([245]);case d.null:return gt([246]);case d.bytes:return t.value.length?void 0:gt([64]);case d.string:return t.value===""?gt([96]):void 0;case d.array:return t.value===0?gt([128]):void 0;case d.map:return t.value===0?gt([160]):void 0;case d.uint:return t.value<24?gt([Number(t.value)]):void 0;case d.negint:if(t.value>=-24)return gt([31-Number(t.value)])}}var fw={float64:!1,mapSorter:pw,quickEncodeToken:kf};function dw(){let t=[];return t[d.uint.major]=Ge,t[d.negint.major]=bo,t[d.bytes.major]=Lr,t[d.string.major]=Yl,t[d.array.major]=Eo,t[d.map.major]=Bo,t[d.tag.major]=Ao,t[d.float.major]=So,t}var Cf=dw(),Ua=new Cn,Io=class t{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Bt} object contains circular references`);return new t(r,e)}},jt={null:new E(d.null,null),undefined:new E(d.undefined,void 0),true:new E(d.true,!0),false:new E(d.false,!1),emptyArray:new E(d.array,0),emptyMap:new E(d.map,0)},zt={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new E(d.float,t):t>=0?new E(d.uint,t):new E(d.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new E(d.uint,t):new E(d.negint,t)},Uint8Array(t,e,r,n){return new E(d.bytes,t)},string(t,e,r,n){return new E(d.string,t)},boolean(t,e,r,n){return t?jt.true:jt.false},null(t,e,r,n){return jt.null},undefined(t,e,r,n){return jt.undefined},ArrayBuffer(t,e,r,n){return new E(d.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new E(d.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[jt.emptyArray,new E(d.break)]:jt.emptyArray;n=Io.createCheck(n,t);let o=[],s=0;for(let i of t)o[s++]=Co(i,r,n);return r.addBreakTokens?[new E(d.array,t.length),o,new E(d.break)]:[new E(d.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",s=o?t.keys():Object.keys(t),i=o?t.size:s.length;if(!i)return r.addBreakTokens===!0?[jt.emptyMap,new E(d.break)]:jt.emptyMap;n=Io.createCheck(n,t);let a=[],c=0;for(let f of s)a[c++]=[Co(f,r,n),Co(o?t.get(f):t[f],r,n)];return hw(a,r),r.addBreakTokens?[new E(d.map,i),a,new E(d.break)]:[new E(d.map,i),a]}};zt.Map=zt.Object;zt.Buffer=zt.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))zt[`${t}Array`]=zt.DataView;function Co(t,e={},r){let n=Sl(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||zt[n];if(typeof o=="function"){let i=o(t,n,e,r);if(i!=null)return i}let s=zt[n];if(!s)throw new Error(`${Bt} unsupported type: ${n}`);return s(t,n,e,r)}function hw(t,e){e.mapSorter&&t.sort(e.mapSorter)}function pw(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=Cf[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function If(t,e,r,n){if(Array.isArray(e))for(let o of e)If(t,o,r,n);else r[e.type.major](t,e,n)}function Ta(t,e,r){let n=Co(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=e[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new Cn(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return kn(a.chunks[0])}}return Ua.reset(),If(Ua,n,e,r),Ua.toBytes(!0)}function Na(t,e){return e=Object.assign({},fw,e),Ta(t,Cf,e)}var mw={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Uo=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],r=ot[e];if(r===void 0){let n=I[e];if(!n)throw new Error(`${O} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},Nn=Symbol.for("DONE"),To=Symbol.for("BREAK");function gw(t,e,r){let n=[];for(let o=0;o<t.value;o++){let s=Vr(e,r);if(s===To){if(t.value===1/0)break;throw new Error(`${O} got unexpected break to lengthed array`)}if(s===Nn)throw new Error(`${O} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=s}return n}function yw(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<t.value;i++){let a=Vr(e,r);if(a===To){if(t.value===1/0)break;throw new Error(`${O} got unexpected break to lengthed map`)}if(a===Nn)throw new Error(`${O} found map but not enough entries (got ${i} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${O} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${O} found repeat map key "${a}"`);let c=Vr(e,r);if(c===Nn)throw new Error(`${O} found map but not enough entries (got ${i} [no value], expected ${t.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function Vr(t,e){if(t.done())return Nn;let r=t.next();if(r.type===d.break)return To;if(r.type.terminal)return r.value;if(r.type===d.array)return gw(r,t,e);if(r.type===d.map)return yw(r,t,e);if(r.type===d.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Vr(t,e);return e.tags[r.value](n)}throw new Error(`${O} tag not supported (${r.value})`)}throw new Error("unsupported")}function Pa(t,e){if(!(t instanceof Uint8Array))throw new Error(`${O} data to decode must be a Uint8Array`);e=Object.assign({},mw,e);let r=e.tokenizer||new Uo(t,e),n=Vr(r,e);if(n===Nn)throw new Error(`${O} did not find any content to decode`);if(n===To)throw new Error(`${O} got unexpected break`);return[n,t.subarray(r.pos())]}function Pn(t,e){let[r,n]=Pa(t,e);if(n.length>0)throw new Error(`${O} too many terminals, data makes no sense`);return r}var Uf=42;function Tf(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function xw(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=A.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new E(d.tag,Uf),new E(d.bytes,r)]}function bw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function vw(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Ra={float64:!0,typeEncoders:{Object:xw,undefined:bw,number:vw}},Ew={...Ra,typeEncoders:{...Ra.typeEncoders}};function Bw(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return A.decode(t.subarray(1))}var No={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};No.tags[Uf]=Bw;var Aw={...No,tags:No.tags.slice()},Sw="dag-cbor",kw=113,_a=t=>Na(t,Ra),La=t=>Pn(Tf(t),No);var Ma={};de(Ma,{code:()=>Ow,decode:()=>Pf,encode:()=>Nf,format:()=>Vw,name:()=>Dw,parse:()=>Hw,stringify:()=>Vw});var Da=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===d.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===d.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[d.uint.major](e,r){this.prefix(e);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);e.push(o)}[d.negint.major](e,r){this[d.uint.major](e,r)}[d.bytes.major](e,r){throw new Error(`${Bt} unsupported type: Uint8Array`)}[d.string.major](e,r){this.prefix(e);let n=xo(JSON.stringify(r.value));e.push(n.length>32?kn(n):n)}[d.array.major](e,r){this.prefix(e),this.inRecursive.push({type:d.array,elements:0}),e.push([91])}[d.map.major](e,r){this.prefix(e),this.inRecursive.push({type:d.map,elements:0}),e.push([123])}[d.tag.major](e,r){}[d.float.major](e,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===d.array)e.push([93]);else if(i.type===d.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${Bt} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),e.push(o)}};function Cw(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${Bt} complex map keys are not supported`);let r=t[0],n=e[0];if(r.type!==d.string||n.type!==d.string)throw new Error(`${Bt} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${Bt} unexpected duplicate map keys, this is not supported`)}var Iw={addBreakTokens:!0,mapSorter:Cw};function Oa(t,e){return e=Object.assign({},Iw,e),Ta(t,new Da,e)}var Fr=class{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${O} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${O} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this._pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new E(d.uint,0,this._pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${O} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${O} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),i=parseFloat(s);return n?new E(d.float,i,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new E(i>=0?d.uint:d.negint,i,this._pos-e):new E(i>=0?d.uint:d.negint,BigInt(s),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${O} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new E(d.string,c,i)}}let e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${O} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${O} unexpected unicode escape character at position ${this._pos}`);s=s*16+a,this._pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${O} unexpected unicode sequence at position ${this._pos}`);let c,f,u,l;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(s&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this._pos+1],f=this.data[this._pos+2],(c&192)===128&&(f&192)===128&&(l=(s&15)<<12|(c&63)<<6|f&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this._pos+1],f=this.data[this._pos+2],u=this.data[this._pos+3],(c&192)===128&&(f&192)===128&&(u&192)===128&&(l=(s&15)<<18|(c&63)<<12|(f&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this._pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${O} unexpected string termination at position ${this._pos}`);switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${O} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new E(d.string,Aa(r),this._pos-e);default:if(s<32)throw new Error(`${O} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):o()}}throw new Error(`${O} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new E(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new E(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new E(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new E(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new E(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${O} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${O} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new E(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${O} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${O} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${O} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function Va(t,e){return e=Object.assign({tokenizer:new Fr(t,e)},e),Pn(t,e)}function Tw(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function Nw(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=A.asCID(t);if(!e)return null;let r=e.toString();return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.string,r,r.length),new E(d.break,void 0,1)]}function Ro(t){let e=Ur.encode(t).slice(1);return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.map,1/0,1),new E(d.string,"bytes",5),new E(d.string,e,e.length),new E(d.break,void 0,1),new E(d.break,void 0,1)]}function st(t){return Ro(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Pw(t){return Ro(new Uint8Array(t))}function Rw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function _w(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Lw={typeEncoders:{Object:Nw,Buffer:Ro,Uint8Array:Ro,Int8Array:st,Uint16Array:st,Int16Array:st,Uint32Array:st,Int32Array:st,Float32Array:st,Float64Array:st,Uint8ClampedArray:st,BigInt64Array:st,BigUint64Array:st,DataView:st,ArrayBuffer:Pw,undefined:Rw,number:_w}},Fa=class extends Fr{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===d.map){let r=this._next();if(r.type===d.string&&r.value==="/"){let n=this._next();if(n.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new E(d.tag,42,0)}if(n.type===d.map){let o=this._next();if(o.type===d.string&&o.value==="bytes"){let s=this._next();if(s.type===d.string){for(let a=0;a<2;a++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");let i=Ur.decode(`m${s.value}`);return new E(d.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}},Ha={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ha.tags[42]=A.parse;var Dw="dag-json",Ow=297,Nf=t=>Oa(t,Lw),Pf=t=>{let e=Tw(t),r=Object.assign(Ha,{tokenizer:new Fa(e,Ha)});return Va(e,r)},Vw=t=>Fw.decode(Nf(t));var Fw=new TextDecoder,Hw=t=>Pf(Mw.encode(t)),Mw=new TextEncoder;var Ka={};de(Ka,{code:()=>Qw,createLink:()=>$f,createNode:()=>Mf,decode:()=>tx,encode:()=>ex,name:()=>Yw,prepare:()=>za,validate:()=>qa});var $w=new TextDecoder;function $a(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function _o(t,e){let r;[r,e]=$a(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Rf(t,e){let r;return[r,e]=$a(t,e),[r&7,r>>3,e]}function jw(t){let e={},r=t.length,n=0;for(;n<r;){let o,s;if([o,s,n]=Rf(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=_o(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=_o(t,n),e.Name=$w.decode(i)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=$a(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function _f(t){let e=t.length,r=0,n,o=!1,s;for(;r<e;){let a,c;if([a,c,r]=Rf(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=_o(t,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=_o(t,r),n.push(jw(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var Df=new TextEncoder,Lf=2**32,zw=2**31;function qw(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Rn(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=Df.encode(t.Name);r-=n.length,e.set(n,r),r=Rn(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Rn(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Of(t){let e=Gw(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=Rn(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){let s=qw(t.Links[o],r.subarray(0,n));n-=s,n=Rn(r,n,s)-1,r[n]=18}return r}function Kw(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+Hr(r)}if(typeof t.Name=="string"){let r=Df.encode(t.Name).length;e+=1+r+Hr(r)}return typeof t.Tsize=="number"&&(e+=1+Hr(t.Tsize)),e}function Gw(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+Hr(r)}if(t.Links)for(let r of t.Links){let n=Kw(r);e+=1+n+Hr(n)}return e}function Rn(t,e,r){e-=Hr(r);let n=e;for(;r>=zw;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function Hr(t){return t%2===0&&t++,Math.floor((Ww(t)+6)/7)}function Ww(t){let e=0;return t>=Lf&&(t=Math.floor(t/Lf),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+Jw[t]}var Jw=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var Zw=["Data","Links"],Xw=["Hash","Name","Tsize"],ja=new TextEncoder;function Ff(t,e){if(t===e)return 0;let r=t.Name?ja.encode(t.Name):[],n=e.Name?ja.encode(e.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function Vf(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function Hf(t){if(typeof t.asCID=="object"){let r=A.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=A.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=A.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=A.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function za(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=ja.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(Hf),e.Links.sort(Ff);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function qa(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!Vf(t,Zw))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Vf(r,Xw))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&Ff(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Mf(t,e=[]){return za({Data:t,Links:e})}function $f(t,e,r){return Hf({Hash:r,Name:t,Tsize:e})}function jf(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}var Yw="dag-pb",Qw=112;function ex(t){qa(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),Of(e)}function tx(t){let e=jf(t),r=_f(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(o=>{let s={};try{s.Hash=A.decode(o.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(s.Name=o.Name),o.Tsize!==void 0&&(s.Tsize=o.Tsize),s})),n}var rc={};de(rc,{code:()=>Hx,decode:()=>zx,encode:()=>jx,name:()=>Fx,toGeneral:()=>dd});var Z8=new Uint8Array(0);function zf(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Mr(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function rx(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,m=0,v=0,k=g.length;v!==k&&g[v]===0;)v++,w++;for(var y=(k-v)*u+1>>>0,C=new Uint8Array(y);v!==k;){for(var D=g[v],_=0,U=y-1;(D!==0||_<m)&&U!==-1;U--,_++)D+=256*C[U]>>>0,C[U]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");m=_,v++}for(var T=y-m;T!==y&&C[T]===0;)T++;for(var P=c.repeat(w);T<y;++T)P+=t.charAt(C[T]);return P}function p(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var m=0,v=0;g[w]===c;)m++,w++;for(var k=(g.length-w)*f+1>>>0,y=new Uint8Array(k);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var D=0,_=k-1;(C!==0||D<v)&&_!==-1;_--,D++)C+=a*y[_]>>>0,y[_]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");v=D,w++}if(g[w]!==" "){for(var U=k-v;U!==k&&y[U]===0;)U++;for(var T=new Uint8Array(m+(k-U)),P=m;U!==k;)T[P++]=y[U++];return T}}}function b(g){var w=p(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:b}}var nx=rx,ox=nx,qf=ox;var Ga=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Wa=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Kf(this,e)}},Ja=class{decoders;constructor(e){this.decoders=e}or(e){return Kf(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Kf(t,e){return new Ja({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var Za=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Ga(e,r,n),this.decoder=new Wa(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Gf({name:t,prefix:e,encode:r,decode:n}){return new Za(t,e,r,n)}function Xa({name:t,prefix:e,alphabet:r}){let{encode:n,decode:o}=qf(r,t);return Gf({prefix:e,name:t,encode:n,decode:s=>Mr(o(s))})}function sx(t,e,r,n){let o={};for(let u=0;u<e.length;++u)o[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,f=0;for(let u=0;u<s;++u){let l=o[t[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[f++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return i}function ix(t,e,r){let n=e[e.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],i+=8;i>r;)i-=r,s+=e[o&a>>i];if(i!==0&&(s+=e[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function Pe({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Gf({prefix:e,name:t,encode(o){return ix(o,n,r)},decode(o){return sx(o,n,r,t)}})}var nA=Pe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oA=Pe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ya=Pe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sA=Pe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function it(t){return Ya.encode(t).slice(1)}function Je(t){return Ya.decode(`u${t}`)}var _n=Pe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),lA=Pe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fA=Pe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dA=Pe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hA=Pe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pA=Pe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mA=Pe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gA=Pe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yA=Pe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var St=Xa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bA=Xa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ax=Zf,Wf=128,cx=127,ux=~cx,lx=Math.pow(2,31);function Zf(t,e,r){e=e||[],r=r||0;for(var n=r;t>=lx;)e[r++]=t&255|Wf,t/=128;for(;t&ux;)e[r++]=t&255|Wf,t>>>=7;return e[r]=t|0,Zf.bytes=r-n+1,e}var fx=Qa,dx=128,Jf=127;function Qa(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a)throw Qa.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&Jf)<<o:(i&Jf)*Math.pow(2,o),o+=7}while(i>=dx);return Qa.bytes=s-n,r}var hx=Math.pow(2,7),px=Math.pow(2,14),mx=Math.pow(2,21),gx=Math.pow(2,28),yx=Math.pow(2,35),wx=Math.pow(2,42),xx=Math.pow(2,49),bx=Math.pow(2,56),vx=Math.pow(2,63),Ex=function(t){return t<hx?1:t<px?2:t<mx?3:t<gx?4:t<yx?5:t<wx?6:t<xx?7:t<bx?8:t<vx?9:10},Bx={encode:ax,decode:fx,encodingLength:Ex},Ax=Bx,Ln=Ax;function Dn(t,e=0){return[Ln.decode(t,e),Ln.decode.bytes]}function $r(t,e,r=0){return Ln.encode(t,e,r),e}function jr(t){return Ln.encodingLength(t)}function Yf(t,e){let r=e.byteLength,n=jr(t),o=n+jr(r),s=new Uint8Array(o+r);return $r(t,s,0),$r(r,s,n),s.set(e,o),new zr(t,r,e,s)}function Qf(t){let e=Mr(t),[r,n]=Dn(e),[o,s]=Dn(e.subarray(n)),i=e.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new zr(r,o,i,e)}function ed(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&zf(t.bytes,r.bytes)}}var zr=class{code;size;digest;bytes;constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}};function td(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return Cx(r,ec(t),e??St.encoder);default:return Ix(r,ec(t),e??_n.encoder)}}var rd=new WeakMap;function ec(t){let e=rd.get(t);if(e==null){let r=new Map;return rd.set(t,r),r}return e}var qr=class t{code;version;multihash;bytes;"/";constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==On)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ux)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Yf(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&ed(e.multihash,n.multihash)}toString(e){return td(this,e)}toJSON(){return{"/":td(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new t(n,o,s,i??nd(n,o,s.bytes))}else if(r[Tx]===!0){let{version:n,multihash:o,code:s}=r,i=Qf(o);return t.create(n,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==On)throw new Error(`Version 0 CID must use dag-pb (code: ${On}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let o=nd(e,r,n.bytes);return new t(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,On,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,o=Mr(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new zr(r.multihashCode,r.digestSize,s,o);return[r.version===0?t.createV0(i):t.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,p]=Dn(e.subarray(r));return r+=p,l},o=n(),s=On;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),f=r+c,u=f-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,o]=kx(e,r),s=t.decode(o);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ec(s).set(n,e),s}};function kx(t,e){switch(t[0]){case"Q":{let r=e??St;return[St.prefix,r.decode(`${St.prefix}${t}`)]}case St.prefix:{let r=e??St;return[St.prefix,r.decode(t)]}case _n.prefix:{let r=e??_n;return[_n.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Cx(t,e,r){let{prefix:n}=r;if(n!==St.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o}function Ix(t,e,r){let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o}var On=112,Ux=18;function nd(t,e,r){let n=jr(t),o=n+jr(e),s=new Uint8Array(o+r.byteLength);return $r(t,s,0),$r(e,s,n),s.set(r,o),s}var Tx=Symbol.for("@ipld/js-cid/CID");function od(t){let[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:qr.decode(Je(r))}}function Nx(t){let e={signature:Je(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Je(t.protected)),e}function sd(t){return{payload:Je(t.payload),signatures:t.signatures.map(Nx)}}function Px(t){let e={signature:it(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=it(t.protected)),e}function id(t){let e={payload:it(t.payload),signatures:t.signatures.map(Px)};try{return e.pld=tc(_x(t.payload)),e}catch{try{return e.link=qr.decode(new Uint8Array(t.payload)),e}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function tc(t){if(typeof t=="string"){if(t.startsWith("ipfs://"))return qr.parse(t.slice(7))}else{if(Array.isArray(t))return t.map(tc);if(Rx(t)){let e={};for(let r in t)e[r]=tc(t[r]);return e}}return t}function Rx(t){return typeof t=="object"&&t!==null}function _x(t){return JSON.parse(new TextDecoder().decode(t))}function ad(t){let[e,r,n,o,s]=t,i={ciphertext:o,iv:n,protected:e,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function Dx(t){let e={};return t.encrypted_key&&(e.encrypted_key=Je(t.encrypted_key)),t.header&&(e.header=t.header),e}function cd(t){let e={ciphertext:Je(t.ciphertext),protected:Je(t.protected),iv:Je(t.iv),tag:Je(t.tag)};return t.aad&&(e.aad=Je(t.aad)),t.recipients&&(e.recipients=t.recipients.map(Dx)),t.unprotected&&(e.unprotected=t.unprotected),e}function Ox(t){let e={};return t.encrypted_key&&(e.encrypted_key=it(t.encrypted_key)),t.header&&(e.header=t.header),e}function ud(t){let e={ciphertext:it(t.ciphertext),protected:it(t.protected),iv:it(t.iv),tag:it(t.tag)};return t.aad&&(e.aad=it(t.aad)),t.recipients&&(e.recipients=t.recipients.map(Ox)),t.unprotected&&(e.unprotected=t.unprotected),e}var Fx="dag-jose",Hx=133;function ld(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function Mx(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function $x(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function fd(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function dd(t){if(typeof t=="string"){let e=t.split(".");if(e.length===3)return od(e);if(e.length===5)return ad(e);throw new Error("Not a valid JOSE string")}if(ld(t)||fd(t))return t;throw new Error("Not a valid unencoded JOSE object")}function jx(t){typeof t=="string"&&(t=dd(t));let e;if(ld(t))e=sd(t);else if(fd(t))e=cd(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(_a(e))}function zx(t){let e;try{e=La(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Mx(e))return id(e);if($x(e))return ud(e);throw new Error("Not a valid DAG-JOSE object")}function be(t){let e=new globalThis.AbortController;function r(){e.abort();for(let s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}for(let s of t){if(s?.aborted===!0){r();break}s?.addEventListener!=null&&s.addEventListener("abort",r)}function n(){for(let s of t)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}let o=e.signal;return o.clear=n,o}var hd="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var pd=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=hd[r[t]&63];return e};var yd=Mt(gd(),1),wd=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,nc=(0,yd.default)(),Kr=wd&&!nc;var xd=nc&&wd,bd=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!nc,Gr=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,VA=typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+"_"+"ENV"]==="test",FA=typeof navigator<"u"&&navigator.product==="ReactNative";async function*kt(t,e={}){let r=t.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var Hn=Mt(Vn(),1);function Gx(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}var qt=Gx;function Wx(t){return t[Symbol.asyncIterator]!=null}function Jx(t,e){let r=0;if(Wx(t))return(async function*(){for await(let c of t)yield e(c,r++)})();let n=qt(t),{value:o,done:s}=n.next();if(s===!0)return(function*(){})();let i=e(o,r++);if(typeof i.then=="function")return(async function*(){yield await i;for await(let c of n)yield e(c,r++)})();let a=e;return(function*(){yield i;for(let c of n)yield a(c,r++)})()}var oc=Jx;var Lo=class extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}},Do=class extends Error{constructor(e="Invalid mtime"){super(e),this.name="InvalidMtimeError"}};function Ct(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function dr(t){return t.constructor!=null&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function Fn(t){return typeof t=="object"&&(t.path!=null||t.content!=null)}function hr(t){return typeof t?.getReader=="function"}function Oo(t){if(t!=null)return typeof t=="string"&&(t=parseInt(t,8)),t&4095}function Zx(t){return Object.prototype.hasOwnProperty.call(t,"secs")}function Xx(t){return Object.prototype.hasOwnProperty.call(t,"Seconds")}function Yx(t){return Array.isArray(t)}function Kt(t){if(t!=null){if(Zx(t)&&(t={secs:t.secs,nsecs:t.nsecs}),Xx(t)&&(t={secs:BigInt(t.Seconds),nsecs:t.FractionalNanoseconds}),Yx(t)&&(t={secs:BigInt(t[0]),nsecs:t[1]}),t instanceof Date){let e=t.getTime(),r=Math.floor(e/1e3);t={secs:BigInt(r),nsecs:(e-r*1e3)*1e3}}if(typeof t=="bigint"){let e=t/BigInt(1e9),r=t-e*BigInt(1e9);t={secs:e,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw new Do("mtime-nsecs must be within the range [0,999999999]");return t}}}async function*Bd(t,e){if(typeof t=="string"||t instanceof String||Ct(t)||dr(t)||t._readableState!=null)throw(0,Hn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(hr(t)&&(t=kt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=qt(t),{value:n,done:o}=await r.peek();if(o===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,Hn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*oc(r,async s=>sc({content:s},e));return}if(Ct(n)){yield sc({content:r},e);return}if(Fn(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||hr(n)||dr(n)){yield*oc(r,async s=>sc(s,e));return}}throw Fn(t)?(0,Hn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,Hn.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function sc(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r??"",mode:Oo(n),mtime:Kt(o)};return s!=null?i.content=await e(s):r==null&&(i.content=await e(t)),i}var ic=Symbol.for("@libp2p/peer-id");var ue=class extends Error{static name="InvalidParametersError";constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}},Wr=class extends Error{static name="InvalidPublicKeyError";constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}};var Vo=class extends Error{static name="InvalidMultihashError";constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}};var Jr=class extends Error{static name="UnsupportedKeyTypeError";constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}};function Qx(t){return t[Symbol.asyncIterator]!=null}function eb(t){if(Qx(t))return(async()=>{let r=[];for await(let n of t)r.push(n);return r})();let e=[];for(let r of t)e.push(r);return e}var Fo=eb;async function Ho(t){if(Ct(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(dr(t))return t;if(hr(t)&&(t=kt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=qt(t),{value:r,done:n}=await e.peek();if(n===!0)return Ad(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Fo(e))]);if(Ct(r)||typeof r=="string"||r instanceof String)return Ad(e)}throw new ue(`Unexpected input: ${t}`)}async function Ad(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}function Sd(t){return Bd(t,Ho,!0)}function Zr(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function Mo(t,e,r={},n){let o=[],s=new FormData,i=0,a=0;for await(let{content:c,path:f,mode:u,mtime:l}of Sd(t)){let p="",b=c!=null?"file":"dir";i>0&&(p=`-${i}`);let g=b+p,w=[];if(u!=null&&w.push(`mode=${Zr(u)}`),l!=null){let{secs:m,nsecs:v}=l;w.push(`mtime=${m}`),v!=null&&w.push(`mtime-nsecs=${v}`)}if(w.length>0&&(g=`${g}?${w.join("&")}`),c!=null){s.set(g,c,f!=null?encodeURIComponent(f):void 0);let m=a+c.size;o.push({name:f,start:a,end:m}),a=m}else if(f!=null)s.set(g,new File([""],encodeURIComponent(f),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:a,parts:o,headers:r,body:s}}async function Ie(t,e,r={},n=`-----------------------------${pd()}`){let o=Mo;return xd&&(o=Mo),o(t,e,r,n)}function W(t){if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,o)=>(e.test(o)?n[o.toLowerCase()]=t[o]:e.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=t[o]:n[o]=t[o],n),r)}function h({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:o,...s}={}){e!=null&&(s={...s,...e}),r!=null&&(s.hash=r),n!=null&&(n=Kt(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=Zr(o)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let i={};for(let[c,f]of Object.entries(s))f!=null&&(i[c]=f);let a=new URLSearchParams(i);return t.forEach(c=>{a.append("arg",c)}),a}function $o(t){return async function*(r,n={}){let o=new AbortController,s=be([o.signal,n.signal]);try{let{headers:i,body:a,total:c,parts:f}=await Ie(r,o,n.headers),[u,l]=typeof n.progress=="function"?tb(c,n.progress,f):[void 0,void 0],p=await t.post("add",{searchParams:h({"stream-channels":!0,...n,progress:!!u}),onUploadProgress:l,signal:s,headers:i,body:a});for await(let b of p.ndjson())b=W(b),b.hash!==void 0?yield nb(b):u?.(b.bytes??0,b.name)}finally{s.clear()}}}var tb=(t,e,r)=>r!=null?[void 0,rb(t,r,e)]:[e,void 0],rb=(t,e,r)=>{let n=0,o=e.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*t);for(;n<o;){let{start:c,end:f,name:u}=e[n];if(a<f){r(a-c,u);break}else r(f-c,u),n+=1}}};function nb({name:t,hash:e,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:t,cid:A.parse(e),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s??0}),i}function ob(t){return t[Symbol.asyncIterator]!=null}function sb(t){if(ob(t))return(async()=>{let r;for await(let n of t)r=n;return r})();let e;for(let r of t)e=r;return e}var Gt=sb;var zo=Mt(Vn(),1);async function*kd(t,e){if(t==null)throw(0,zo.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield jo(t.toString(),e);return}if(Ct(t)||dr(t)){yield jo(t,e);return}if(hr(t)&&(t=kt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=qt(t),{value:n,done:o}=await r.peek();if(o===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Ct(n)||typeof n=="string"||n instanceof String){yield jo(r,e);return}throw(0,zo.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Fn(t)){yield jo(t,e);return}throw(0,zo.default)(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function jo(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r??"",mode:Oo(n),mtime:Kt(o)};return s!=null?i.content=await e(s):r==null&&(i.content=await e(t)),i}function Cd(t){return kd(t,Ho)}function Id(t){let e=$o(t);return async function(n,o={}){let s=Cd(n),i=e(s,o),a=await Gt(i);if(a==null)throw new Error("Invalid body");return a}}function Ud(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ib(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xr(t,...e){if(!ib(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Td(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ud(t.outputLen),Ud(t.blockLen)}function Yr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Nd(t,e){Xr(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}var pr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function qo(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function at(t,e){return t<<32-e|t>>>e}function Pd(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Mn(t){return typeof t=="string"&&(t=Pd(t)),Xr(t),t}function ac(...t){let e=0;for(let n=0;n<t.length;n++){let o=t[n];Xr(o),e+=o.length}let r=new Uint8Array(e);for(let n=0,o=0;n<t.length;n++){let s=t[n];r.set(s,o),o+=s.length}return r}var Qr=class{clone(){return this._cloneInto()}};function Ko(t){let e=n=>t().update(Mn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Go(t=32){if(pr&&typeof pr.getRandomValues=="function")return pr.getRandomValues(new Uint8Array(t));if(pr&&typeof pr.randomBytes=="function")return pr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function ab(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let o=BigInt(32),s=BigInt(4294967295),i=Number(r>>o&s),a=Number(r&s),c=n?4:0,f=n?0:4;t.setUint32(e+c,i,n),t.setUint32(e+f,a,n)}function Rd(t,e,r){return t&e^~t&r}function _d(t,e,r){return t&e^t&r^e&r}var en=class extends Qr{constructor(e,r,n,o){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qo(this.buffer)}update(e){Yr(this);let{view:r,buffer:n,blockLen:o}=this;e=Mn(e);let s=e.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=qo(e);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yr(this),Nd(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(n,0),i=0);for(let l=i;l<o;l++)r[l]=0;ab(n,o-8,BigInt(this.length*8),s),this.process(n,0);let a=qo(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return e.length=o,e.pos=a,e.finished=s,e.destroyed=i,o%r&&e.buffer.set(n),e}};var Wo=BigInt(4294967295),cc=BigInt(32);function Ld(t,e=!1){return e?{h:Number(t&Wo),l:Number(t>>cc&Wo)}:{h:Number(t>>cc&Wo)|0,l:Number(t&Wo)|0}}function cb(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let o=0;o<t.length;o++){let{h:s,l:i}=Ld(t[o],e);[r[o],n[o]]=[s,i]}return[r,n]}var ub=(t,e)=>BigInt(t>>>0)<<cc|BigInt(e>>>0),lb=(t,e,r)=>t>>>r,fb=(t,e,r)=>t<<32-r|e>>>r,db=(t,e,r)=>t>>>r|e<<32-r,hb=(t,e,r)=>t<<32-r|e>>>r,pb=(t,e,r)=>t<<64-r|e>>>r-32,mb=(t,e,r)=>t>>>r-32|e<<64-r,gb=(t,e)=>e,yb=(t,e)=>t,wb=(t,e,r)=>t<<r|e>>>32-r,xb=(t,e,r)=>e<<r|t>>>32-r,bb=(t,e,r)=>e<<r-32|t>>>64-r,vb=(t,e,r)=>t<<r-32|e>>>64-r;function Eb(t,e,r,n){let o=(e>>>0)+(n>>>0);return{h:t+r+(o/2**32|0)|0,l:o|0}}var Bb=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ab=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Sb=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),kb=(t,e,r,n,o)=>e+r+n+o+(t/2**32|0)|0,Cb=(t,e,r,n,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Ib=(t,e,r,n,o,s)=>e+r+n+o+s+(t/2**32|0)|0;var Ub={fromBig:Ld,split:cb,toBig:ub,shrSH:lb,shrSL:fb,rotrSH:db,rotrSL:hb,rotrBH:pb,rotrBL:mb,rotr32H:gb,rotr32L:yb,rotlSH:wb,rotlSL:xb,rotlBH:bb,rotlBL:vb,add:Eb,add3L:Bb,add3H:Ab,add4L:Sb,add4H:kb,add5H:Ib,add5L:Cb},$=Ub;var[Tb,Nb]=$.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Wt=new Uint32Array(80),Jt=new Uint32Array(80),uc=class extends en{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:p,Gh:b,Gl:g,Hh:w,Hl:m}=this;return[e,r,n,o,s,i,a,c,f,u,l,p,b,g,w,m]}set(e,r,n,o,s,i,a,c,f,u,l,p,b,g,w,m){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=p|0,this.Gh=b|0,this.Gl=g|0,this.Hh=w|0,this.Hl=m|0}process(e,r){for(let y=0;y<16;y++,r+=4)Wt[y]=e.getUint32(r),Jt[y]=e.getUint32(r+=4);for(let y=16;y<80;y++){let C=Wt[y-15]|0,D=Jt[y-15]|0,_=$.rotrSH(C,D,1)^$.rotrSH(C,D,8)^$.shrSH(C,D,7),U=$.rotrSL(C,D,1)^$.rotrSL(C,D,8)^$.shrSL(C,D,7),T=Wt[y-2]|0,P=Jt[y-2]|0,ie=$.rotrSH(T,P,19)^$.rotrBH(T,P,61)^$.shrSH(T,P,6),Z=$.rotrSL(T,P,19)^$.rotrBL(T,P,61)^$.shrSL(T,P,6),q=$.add4L(U,Z,Jt[y-7],Jt[y-16]),he=$.add4H(q,_,ie,Wt[y-7],Wt[y-16]);Wt[y]=he|0,Jt[y]=q|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:p,Fh:b,Fl:g,Gh:w,Gl:m,Hh:v,Hl:k}=this;for(let y=0;y<80;y++){let C=$.rotrSH(l,p,14)^$.rotrSH(l,p,18)^$.rotrBH(l,p,41),D=$.rotrSL(l,p,14)^$.rotrSL(l,p,18)^$.rotrBL(l,p,41),_=l&b^~l&w,U=p&g^~p&m,T=$.add5L(k,D,U,Nb[y],Jt[y]),P=$.add5H(T,v,C,_,Tb[y],Wt[y]),ie=T|0,Z=$.rotrSH(n,o,28)^$.rotrBH(n,o,34)^$.rotrBH(n,o,39),q=$.rotrSL(n,o,28)^$.rotrBL(n,o,34)^$.rotrBL(n,o,39),he=n&s^n&a^s&a,N=o&i^o&c^i&c;v=w|0,k=m|0,w=b|0,m=g|0,b=l|0,g=p|0,{h:l,l:p}=$.add(f|0,u|0,P|0,ie|0),f=a|0,u=c|0,a=s|0,c=i|0,s=n|0,i=o|0;let V=$.add3L(ie,q,N);n=$.add3H(V,P,Z,he),o=V|0}({h:n,l:o}=$.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=$.add(this.Bh|0,this.Bl|0,s|0,i|0),{h:a,l:c}=$.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=$.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:p}=$.add(this.Eh|0,this.El|0,l|0,p|0),{h:b,l:g}=$.add(this.Fh|0,this.Fl|0,b|0,g|0),{h:w,l:m}=$.add(this.Gh|0,this.Gl|0,w|0,m|0),{h:v,l:k}=$.add(this.Hh|0,this.Hl|0,v|0,k|0),this.set(n,o,s,i,a,c,f,u,l,p,b,g,w,m,v,k)}roundClean(){Wt.fill(0),Jt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Dd=Ko(()=>new uc);var Xo={};de(Xo,{aInRange:()=>De,abool:()=>ct,abytes:()=>tn,bitGet:()=>Ob,bitLen:()=>hc,bitMask:()=>jn,bitSet:()=>Vb,bytesToHex:()=>Ut,bytesToNumberBE:()=>Tt,bytesToNumberLE:()=>Xt,concatBytes:()=>Nt,createHmacDrbg:()=>pc,ensureBytes:()=>le,equalBytes:()=>Lb,hexToBytes:()=>gr,hexToNumber:()=>dc,inRange:()=>$n,isBytes:()=>Zt,memoized:()=>wr,notImplemented:()=>Hb,numberToBytesBE:()=>Yt,numberToBytesLE:()=>yr,numberToHexUnpadded:()=>mr,numberToVarBytesBE:()=>_b,utf8ToBytes:()=>Db,validateObject:()=>yt});var Jo=BigInt(0),Zo=BigInt(1),Pb=BigInt(2);function Zt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tn(t){if(!Zt(t))throw new Error("Uint8Array expected")}function ct(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}var Rb=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ut(t){tn(t);let e="";for(let r=0;r<t.length;r++)e+=Rb[t[r]];return e}function mr(t){let e=t.toString(16);return e.length&1?"0"+e:e}function dc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Jo:BigInt("0x"+t)}var It={_0:48,_9:57,A:65,F:70,a:97,f:102};function Od(t){if(t>=It._0&&t<=It._9)return t-It._0;if(t>=It.A&&t<=It.F)return t-(It.A-10);if(t>=It.a&&t<=It.f)return t-(It.a-10)}function gr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=Od(t.charCodeAt(s)),a=Od(t.charCodeAt(s+1));if(i===void 0||a===void 0){let c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[o]=i*16+a}return n}function Tt(t){return dc(Ut(t))}function Xt(t){return tn(t),dc(Ut(Uint8Array.from(t).reverse()))}function Yt(t,e){return gr(t.toString(16).padStart(e*2,"0"))}function yr(t,e){return Yt(t,e).reverse()}function _b(t){return gr(mr(t))}function le(t,e,r){let n;if(typeof e=="string")try{n=gr(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Zt(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(t+" of length "+r+" expected, got "+o);return n}function Nt(...t){let e=0;for(let n=0;n<t.length;n++){let o=t[n];tn(o),e+=o.length}let r=new Uint8Array(e);for(let n=0,o=0;n<t.length;n++){let s=t[n];r.set(s,o),o+=s.length}return r}function Lb(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Db(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}var lc=t=>typeof t=="bigint"&&Jo<=t;function $n(t,e,r){return lc(t)&&lc(e)&&lc(r)&&e<=t&&t<r}function De(t,e,r,n){if(!$n(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function hc(t){let e;for(e=0;t>Jo;t>>=Zo,e+=1);return e}function Ob(t,e){return t>>BigInt(e)&Zo}function Vb(t,e,r){return t|(r?Zo:Jo)<<BigInt(e)}var jn=t=>(Pb<<BigInt(t-1))-Zo,fc=t=>new Uint8Array(t),Vd=t=>Uint8Array.from(t);function pc(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=fc(t),o=fc(t),s=0,i=()=>{n.fill(1),o.fill(0),s=0},a=(...l)=>r(o,n,...l),c=(l=fc())=>{o=a(Vd([0]),l),n=a(),l.length!==0&&(o=a(Vd([1]),l),n=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,p=[];for(;l<e;){n=a();let b=n.slice();p.push(b),l+=n.length}return Nt(...p)};return(l,p)=>{i(),c(l);let b;for(;!(b=p(f()));)c();return i(),b}}var Fb={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Zt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function yt(t,e,r={}){let n=(o,s,i)=>{let a=Fb[s];if(typeof a!="function")throw new Error("invalid validator function");let c=t[o];if(!(i&&c===void 0)&&!a(c,t))throw new Error("param "+String(o)+" is invalid. Expected "+s+", got "+c)};for(let[o,s]of Object.entries(e))n(o,s,!1);for(let[o,s]of Object.entries(r))n(o,s,!0);return t}var Hb=()=>{throw new Error("not implemented")};function wr(t){let e=new WeakMap;return(r,...n)=>{let o=e.get(r);if(o!==void 0)return o;let s=t(r,...n);return e.set(r,s),s}}var pe=BigInt(0),ae=BigInt(1),xr=BigInt(2),Mb=BigInt(3),mc=BigInt(4),Fd=BigInt(5),Hd=BigInt(8),$b=BigInt(9),jb=BigInt(16);function ne(t,e){let r=t%e;return r>=pe?r:e+r}function zb(t,e,r){if(e<pe)throw new Error("invalid exponent, negatives unsupported");if(r<=pe)throw new Error("invalid modulus");if(r===ae)return pe;let n=ae;for(;e>pe;)e&ae&&(n=n*t%r),t=t*t%r,e>>=ae;return n}function ce(t,e,r){let n=t;for(;e-- >pe;)n*=n,n%=r;return n}function Yo(t,e){if(t===pe)throw new Error("invert: expected non-zero number");if(e<=pe)throw new Error("invert: expected positive modulus, got "+e);let r=ne(t,e),n=e,o=pe,s=ae,i=ae,a=pe;for(;r!==pe;){let f=n/r,u=n%r,l=o-i*f,p=s-a*f;n=r,r=u,o=i,s=a,i=l,a=p}if(n!==ae)throw new Error("invert: does not exist");return ne(o,e)}function qb(t){let e=(t-ae)/xr,r,n,o;for(r=t-ae,n=0;r%xr===pe;r/=xr,n++);for(o=xr;o<t&&zb(o,e,t)!==t-ae;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){let i=(t+ae)/mc;return function(c,f){let u=c.pow(f,i);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}let s=(r+ae)/xr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,o),r),l=a.pow(c,s),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let b=1;for(let w=a.sqr(p);b<f&&!a.eql(w,a.ONE);b++)w=a.sqr(w);let g=a.pow(u,ae<<BigInt(f-b-1));u=a.sqr(g),l=a.mul(l,g),p=a.mul(p,u),f=b}return l}}function Kb(t){if(t%mc===Mb){let e=(t+ae)/mc;return function(n,o){let s=n.pow(o,e);if(!n.eql(n.sqr(s),o))throw new Error("Cannot find square root");return s}}if(t%Hd===Fd){let e=(t-Fd)/Hd;return function(n,o){let s=n.mul(o,xr),i=n.pow(s,e),a=n.mul(o,i),c=n.mul(n.mul(a,xr),i),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),o))throw new Error("Cannot find square root");return f}}return t%jb,qb(t)}var Md=(t,e)=>(ne(t,e)&ae)===ae,Gb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gc(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Gb.reduce((n,o)=>(n[o]="function",n),e);return yt(t,r)}function Wb(t,e,r){if(r<pe)throw new Error("invalid exponent, negatives unsupported");if(r===pe)return t.ONE;if(r===ae)return e;let n=t.ONE,o=e;for(;r>pe;)r&ae&&(n=t.mul(n,o)),o=t.sqr(o),r>>=ae;return n}function Jb(t,e){let r=new Array(e.length),n=e.reduce((s,i,a)=>t.is0(i)?s:(r[a]=s,t.mul(s,i)),t.ONE),o=t.inv(n);return e.reduceRight((s,i,a)=>t.is0(i)?s:(r[a]=t.mul(s,r[a]),t.mul(s,i)),o),r}function yc(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Qt(t,e,r=!1,n={}){if(t<=pe)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:o,nByteLength:s}=yc(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i,a=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:s,MASK:jn(o),ZERO:pe,ONE:ae,create:c=>ne(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return pe<=c&&c<t},is0:c=>c===pe,isOdd:c=>(c&ae)===ae,neg:c=>ne(-c,t),eql:(c,f)=>c===f,sqr:c=>ne(c*c,t),add:(c,f)=>ne(c+f,t),sub:(c,f)=>ne(c-f,t),mul:(c,f)=>ne(c*f,t),pow:(c,f)=>Wb(a,c,f),div:(c,f)=>ne(c*Yo(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>Yo(c,t),sqrt:n.sqrt||(c=>(i||(i=Kb(t)),i(a,c))),invertBatch:c=>Jb(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>r?yr(c,s):Yt(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Xt(c):Tt(c)}});return Object.freeze(a)}function $d(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function wc(t){let e=$d(t);return e+Math.ceil(e/2)}function jd(t,e,r=!1){let n=t.length,o=$d(e),s=wc(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?Xt(t):Tt(t),a=ne(i,e-ae)+ae;return r?yr(a,o):Yt(a,o)}var zd=BigInt(0),Qo=BigInt(1);function xc(t,e){let r=e.negate();return t?r:e}function qd(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function bc(t,e){qd(t,e);let r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Zb(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Xb(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}var vc=new WeakMap,Kd=new WeakMap;function Ec(t){return Kd.get(t)||1}function es(t,e){return{constTimeNegate:xc,hasPrecomputes(r){return Ec(r)!==1},unsafeLadder(r,n,o=t.ZERO){let s=r;for(;n>zd;)n&Qo&&(o=o.add(s)),s=s.double(),n>>=Qo;return o},precomputeWindow(r,n){let{windows:o,windowSize:s}=bc(n,e),i=[],a=r,c=a;for(let f=0;f<o;f++){c=a,i.push(c);for(let u=1;u<s;u++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(r,n,o){let{windows:s,windowSize:i}=bc(r,e),a=t.ZERO,c=t.BASE,f=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let p=0;p<s;p++){let b=p*i,g=Number(o&f);o>>=l,g>i&&(g-=u,o+=Qo);let w=b,m=b+Math.abs(g)-1,v=p%2!==0,k=g<0;g===0?c=c.add(xc(v,n[w])):a=a.add(xc(k,n[m]))}return{p:a,f:c}},wNAFUnsafe(r,n,o,s=t.ZERO){let{windows:i,windowSize:a}=bc(r,e),c=BigInt(2**r-1),f=2**r,u=BigInt(r);for(let l=0;l<i;l++){let p=l*a;if(o===zd)break;let b=Number(o&c);if(o>>=u,b>a&&(b-=f,o+=Qo),b===0)continue;let g=n[p+Math.abs(b)-1];b<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,o){let s=vc.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&vc.set(n,o(s))),s},wNAFCached(r,n,o){let s=Ec(r);return this.wNAF(s,this.getPrecomputes(s,r,o),n)},wNAFCachedUnsafe(r,n,o,s){let i=Ec(r);return i===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,r,o),n,s)},setWindowSize(r,n){qd(n,e),Kd.set(r,n),vc.delete(r)}}}function ts(t,e,r,n){if(Zb(r,t),Xb(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");let o=t.ZERO,s=hc(BigInt(r.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,c=new Array(a+1).fill(o),f=Math.floor((e.BITS-1)/i)*i,u=o;for(let l=f;l>=0;l-=i){c.fill(o);for(let b=0;b<n.length;b++){let g=n[b],w=Number(g>>BigInt(l)&BigInt(a));c[w]=c[w].add(r[b])}let p=o;for(let b=c.length-1,g=o;b>0;b--)g=g.add(c[b]),p=p.add(g);if(u=u.add(p),l!==0)for(let b=0;b<i;b++)u=u.double()}return u}function zn(t){return gc(t.Fp),yt(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yc(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var ut=BigInt(0),Oe=BigInt(1),rs=BigInt(2),Yb=BigInt(8),Qb={zip215:!0};function e1(t){let e=zn(t);return yt(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Gd(t){let e=e1(t),{Fp:r,n,prehash:o,hash:s,randomBytes:i,nByteLength:a,h:c}=e,f=rs<<BigInt(a*8)-Oe,u=r.create,l=Qt(e.n,e.nBitLength),p=e.uvRatio||((B,x)=>{try{return{isValid:!0,value:r.sqrt(B*r.inv(x))}}catch{return{isValid:!1,value:ut}}}),b=e.adjustScalarBytes||(B=>B),g=e.domain||((B,x,S)=>{if(ct("phflag",S),x.length||S)throw new Error("Contexts/pre-hash are not supported");return B});function w(B,x){De("coordinate "+B,x,ut,f)}function m(B){if(!(B instanceof y))throw new Error("ExtendedPoint expected")}let v=wr((B,x)=>{let{ex:S,ey:L,ez:F}=B,H=B.is0();x==null&&(x=H?Yb:r.inv(F));let z=u(S*x),G=u(L*x),M=u(F*x);if(H)return{x:ut,y:Oe};if(M!==Oe)throw new Error("invZ was invalid");return{x:z,y:G}}),k=wr(B=>{let{a:x,d:S}=e;if(B.is0())throw new Error("bad point: ZERO");let{ex:L,ey:F,ez:H,et:z}=B,G=u(L*L),M=u(F*F),Q=u(H*H),oe=u(Q*Q),ye=u(G*x),we=u(Q*u(ye+M)),Ee=u(oe+u(S*u(G*M)));if(we!==Ee)throw new Error("bad point: equation left != right (1)");let ke=u(L*F),_e=u(H*z);if(ke!==_e)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(x,S,L,F){this.ex=x,this.ey=S,this.ez=L,this.et=F,w("x",x),w("y",S),w("z",L),w("t",F),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof y)throw new Error("extended point not allowed");let{x:S,y:L}=x||{};return w("x",S),w("y",L),new y(S,L,Oe,u(S*L))}static normalizeZ(x){let S=r.invertBatch(x.map(L=>L.ez));return x.map((L,F)=>L.toAffine(S[F])).map(y.fromAffine)}static msm(x,S){return ts(y,l,x,S)}_setWindowSize(x){_.setWindowSize(this,x)}assertValidity(){k(this)}equals(x){m(x);let{ex:S,ey:L,ez:F}=this,{ex:H,ey:z,ez:G}=x,M=u(S*G),Q=u(H*F),oe=u(L*G),ye=u(z*F);return M===Q&&oe===ye}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:x}=e,{ex:S,ey:L,ez:F}=this,H=u(S*S),z=u(L*L),G=u(rs*u(F*F)),M=u(x*H),Q=S+L,oe=u(u(Q*Q)-H-z),ye=M+z,we=ye-G,Ee=M-z,ke=u(oe*we),_e=u(ye*Ee),Ne=u(oe*Ee),pt=u(we*ye);return new y(ke,_e,pt,Ne)}add(x){m(x);let{a:S,d:L}=e,{ex:F,ey:H,ez:z,et:G}=this,{ex:M,ey:Q,ez:oe,et:ye}=x;if(S===BigInt(-1)){let Lu=u((H-F)*(Q+M)),Du=u((H+F)*(Q-M)),Ri=u(Du-Lu);if(Ri===ut)return this.double();let Ou=u(z*rs*ye),Vu=u(G*rs*oe),Fu=Vu+Ou,Hu=Du+Lu,Mu=Vu-Ou,Q0=u(Fu*Ri),eg=u(Hu*Mu),tg=u(Fu*Mu),rg=u(Ri*Hu);return new y(Q0,eg,rg,tg)}let we=u(F*M),Ee=u(H*Q),ke=u(G*L*ye),_e=u(z*oe),Ne=u((F+H)*(M+Q)-we-Ee),pt=_e-ke,Et=_e+ke,xn=u(Ee-S*we),J0=u(Ne*pt),Z0=u(Et*xn),X0=u(Ne*xn),Y0=u(pt*Et);return new y(J0,Z0,Y0,X0)}subtract(x){return this.add(x.negate())}wNAF(x){return _.wNAFCached(this,x,y.normalizeZ)}multiply(x){let S=x;De("scalar",S,Oe,n);let{p:L,f:F}=this.wNAF(S);return y.normalizeZ([L,F])[0]}multiplyUnsafe(x,S=y.ZERO){let L=x;return De("scalar",L,ut,n),L===ut?D:this.is0()||L===Oe?this:_.wNAFCachedUnsafe(this,L,y.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(x){return v(this,x)}clearCofactor(){let{h:x}=e;return x===Oe?this:this.multiplyUnsafe(x)}static fromHex(x,S=!1){let{d:L,a:F}=e,H=r.BYTES;x=le("pointHex",x,H),ct("zip215",S);let z=x.slice(),G=x[H-1];z[H-1]=G&-129;let M=Xt(z),Q=S?f:r.ORDER;De("pointHex.y",M,ut,Q);let oe=u(M*M),ye=u(oe-Oe),we=u(L*oe-F),{isValid:Ee,value:ke}=p(ye,we);if(!Ee)throw new Error("Point.fromHex: invalid y coordinate");let _e=(ke&Oe)===Oe,Ne=(G&128)!==0;if(!S&&ke===ut&&Ne)throw new Error("Point.fromHex: x=0 and x_0=1");return Ne!==_e&&(ke=u(-ke)),y.fromAffine({x:ke,y:M})}static fromPrivateKey(x){return P(x).point}toRawBytes(){let{x,y:S}=this.toAffine(),L=yr(S,r.BYTES);return L[L.length-1]|=x&Oe?128:0,L}toHex(){return Ut(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,Oe,u(e.Gx*e.Gy)),y.ZERO=new y(ut,Oe,Oe,ut);let{BASE:C,ZERO:D}=y,_=es(y,a*8);function U(B){return ne(B,n)}function T(B){return U(Xt(B))}function P(B){let x=r.BYTES;B=le("private key",B,x);let S=le("hashed private key",s(B),2*x),L=b(S.slice(0,x)),F=S.slice(x,2*x),H=T(L),z=C.multiply(H),G=z.toRawBytes();return{head:L,prefix:F,scalar:H,point:z,pointBytes:G}}function ie(B){return P(B).pointBytes}function Z(B=new Uint8Array,...x){let S=Nt(...x);return T(s(g(S,le("context",B),!!o)))}function q(B,x,S={}){B=le("message",B),o&&(B=o(B));let{prefix:L,scalar:F,pointBytes:H}=P(x),z=Z(S.context,L,B),G=C.multiply(z).toRawBytes(),M=Z(S.context,G,H,B),Q=U(z+M*F);De("signature.s",Q,ut,n);let oe=Nt(G,yr(Q,r.BYTES));return le("result",oe,r.BYTES*2)}let he=Qb;function N(B,x,S,L=he){let{context:F,zip215:H}=L,z=r.BYTES;B=le("signature",B,2*z),x=le("message",x),S=le("publicKey",S,z),H!==void 0&&ct("zip215",H),o&&(x=o(x));let G=Xt(B.slice(z,2*z)),M,Q,oe;try{M=y.fromHex(S,H),Q=y.fromHex(B.slice(0,z),H),oe=C.multiplyUnsafe(G)}catch{return!1}if(!H&&M.isSmallOrder())return!1;let ye=Z(F,Q.toRawBytes(),M.toRawBytes(),x);return Q.add(M.multiplyUnsafe(ye)).subtract(oe).clearCofactor().equals(y.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:ie,sign:q,verify:N,ExtendedPoint:y,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>i(r.BYTES),precompute(B=8,x=y.BASE){return x._setWindowSize(B),x.multiply(BigInt(3)),x}}}}var Bc=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Wd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),g6=BigInt(0),t1=BigInt(1),Jd=BigInt(2),y6=BigInt(3),r1=BigInt(5),n1=BigInt(8);function o1(t){let e=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),s=Bc,a=t*t%s*t%s,c=ce(a,Jd,s)*a%s,f=ce(c,t1,s)*t%s,u=ce(f,r1,s)*f%s,l=ce(u,e,s)*u%s,p=ce(l,r,s)*l%s,b=ce(p,n,s)*p%s,g=ce(b,o,s)*b%s,w=ce(g,o,s)*b%s,m=ce(w,e,s)*u%s;return{pow_p_5_8:ce(m,Jd,s)*t%s,b2:a}}function s1(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function i1(t,e){let r=Bc,n=ne(e*e*e,r),o=ne(n*n*e,r),s=o1(t*o).pow_p_5_8,i=ne(t*n*s,r),a=ne(e*i*i,r),c=i,f=ne(i*Wd,r),u=a===t,l=a===ne(-t,r),p=a===ne(-t*Wd,r);return u&&(i=c),(l||p)&&(i=f),Md(i,r)&&(i=ne(-i,r)),{isValid:u||l,value:i}}var a1=Qt(Bc,void 0,!0),c1={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:a1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:n1,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Dd,randomBytes:Go,adjustScalarBytes:s1,uvRatio:i1},Zd=Gd(c1);var ns=32;function Xd(t,e,r){return Zd.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}var os=class{type="Ed25519";raw;constructor(e){this.raw=Ac(e,ns)}toMultihash(){return Ke.digest(ss(this))}toCID(){return A.createV1(114,this.toMultihash())}toString(){return se.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:qe(this.raw,e.raw)}verify(e,r){return Xd(this.raw,r,e)}};function Sc(t){return t=Ac(t,ns),new os(t)}function Ac(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ue(`Key must be a Uint8Array of length ${e}, got ${t.length}`);return t}var kc=new Float32Array([-0]),er=new Uint8Array(kc.buffer);function Qd(t,e,r){kc[0]=t,e[r]=er[0],e[r+1]=er[1],e[r+2]=er[2],e[r+3]=er[3]}function eh(t,e){return er[0]=t[e],er[1]=t[e+1],er[2]=t[e+2],er[3]=t[e+3],kc[0]}var Cc=new Float64Array([-0]),Ue=new Uint8Array(Cc.buffer);function th(t,e,r){Cc[0]=t,e[r]=Ue[0],e[r+1]=Ue[1],e[r+2]=Ue[2],e[r+3]=Ue[3],e[r+4]=Ue[4],e[r+5]=Ue[5],e[r+6]=Ue[6],e[r+7]=Ue[7]}function rh(t,e){return Ue[0]=t[e],Ue[1]=t[e+1],Ue[2]=t[e+2],Ue[3]=t[e+3],Ue[4]=t[e+4],Ue[5]=t[e+5],Ue[6]=t[e+6],Ue[7]=t[e+7],Cc[0]}var l1=BigInt(Number.MAX_SAFE_INTEGER),f1=BigInt(Number.MIN_SAFE_INTEGER),ze=class t{lo;hi;constructor(e,r){this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return br;if(e<l1&&e>f1)return this.fromNumber(Number(e));let r=e<0n;r&&(e=-e);let n=e>>32n,o=e-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>nh&&(o=0n,++n>nh&&(n=0n))),new t(Number(o),Number(n))}static fromNumber(e){if(e===0)return br;let r=e<0;r&&(e=-e);let n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new t(n,o)}static from(e){return typeof e=="number"?t.fromNumber(e):typeof e=="bigint"?t.fromBigInt(e):typeof e=="string"?t.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new t(e.low>>>0,e.high>>>0):br}},br=new ze(0,0);br.toBigInt=function(){return 0n};br.zzEncode=br.zzDecode=function(){return this};br.length=function(){return 1};var nh=4294967296n;function oh(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function sh(t,e,r){if(r-e<1)return"";let o,s=[],i=0,a;for(;e<r;)a=t[e++],a<128?s[i++]=a:a>191&&a<224?s[i++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[i++]=55296+(a>>10),s[i++]=56320+(a&1023)):s[i++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,i>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o!=null?(i>0&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))}function Ic(t,e,r){let n=r,o,s;for(let i=0;i<t.length;++i)o=t.charCodeAt(i),o<128?e[r++]=o:o<2048?(e[r++]=o>>6|192,e[r++]=o&63|128):(o&64512)===55296&&((s=t.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++i,e[r++]=o>>18|240,e[r++]=o>>12&63|128,e[r++]=o>>6&63|128,e[r++]=o&63|128):(e[r++]=o>>12|224,e[r++]=o>>6&63|128,e[r++]=o&63|128);return r-n}function lt(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function is(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}var Uc=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,lt(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw lt(this,4);return is(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw lt(this,4);return is(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw lt(this,4);let e=eh(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw lt(this,4);let e=rh(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw lt(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let e=this.bytes();return sh(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw lt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw lt(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new ze(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw lt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw lt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw lt(this,8);let e=is(this.buf,this.pos+=4),r=is(this.buf,this.pos+=4);return new ze(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=ca(this.buf,this.pos);return this.pos+=Le(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Tc(t){return new Uc(t instanceof Uint8Array?t:t.subarray())}function as(t,e,r){let n=Tc(t);return e.decode(n,void 0,r)}function Nc(t){let e=t??8192,r=e>>>1,n,o=e;return function(i){if(i<1||i>r)return rt(i);o+i>e&&(n=rt(e),o=0);let a=n.subarray(o,o+=i);return(o&7)!==0&&(o=(o|7)+1),a}}var vr=class{fn;len;next;val;constructor(e,r,n){this.fn=e,this.len=r,this.next=void 0,this.val=n}};function Pc(){}var _c=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},d1=Nc();function h1(t){return globalThis.Buffer!=null?rt(t):d1(t)}var Kn=class{len;head;tail;states;constructor(){this.len=0,this.head=new vr(Pc,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new vr(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Lc((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(cs,10,ze.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let r=ze.fromBigInt(e);return this._push(cs,r.length(),r)}uint64Number(e){return this._push(aa,Le(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let r=ze.fromBigInt(e).zzEncode();return this._push(cs,r.length(),r)}sint64Number(e){let r=ze.fromNumber(e).zzEncode();return this._push(cs,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Rc,1,e?1:0)}fixed32(e){return this._push(qn,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let r=ze.fromBigInt(e);return this._push(qn,4,r.lo)._push(qn,4,r.hi)}fixed64Number(e){let r=ze.fromNumber(e);return this._push(qn,4,r.lo)._push(qn,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(Qd,4,e)}double(e){return this._push(th,8,e)}bytes(e){let r=e.length>>>0;return r===0?this._push(Rc,1,0):this.uint32(r)._push(m1,r,e)}string(e){let r=oh(e);return r!==0?this.uint32(r)._push(Ic,r,e):this._push(Rc,1,0)}fork(){return this.states=new _c(this),this.head=this.tail=new vr(Pc,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new vr(Pc,0,0),this.len=0),this}ldelim(){let e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next,r=h1(this.len),n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}};function Rc(t,e,r){e[r]=t&255}function p1(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}var Lc=class extends vr{next;constructor(e,r){super(p1,e,r),this.next=void 0}};function cs(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function qn(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function m1(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(Kn.prototype.bytes=function(t){let e=t.length>>>0;return this.uint32(e),e>0&&this._push(g1,e,t),this},Kn.prototype.string=function(t){let e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(y1,e,t),this});function g1(t,e,r){e.set(t,r)}function y1(t,e,r){t.length<40?Ic(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(te(t),r)}function Dc(){return new Kn}function us(t,e){let r=Dc();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var rn;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(rn||(rn={}));function ls(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Oc(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}let r=function(s,i){let a=e(s);i.int32(a)},n=function(s){let i=s.int32();return e(i)};return ls("enum",rn.VARINT,r,n)}function fs(t,e){return ls("message",rn.LENGTH_DELIMITED,t,e)}var me;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"})(me||(me={}));var Vc;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"})(Vc||(Vc={}));(function(t){t.codec=()=>Oc(Vc)})(me||(me={}));var wt;(function(t){let e;t.codec=()=>(e==null&&(e=fs((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),me.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=me.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>us(r,t.codec()),t.decode=(r,n)=>as(r,t.codec(),n)})(wt||(wt={}));var Fc;(function(t){let e;t.codec=()=>(e==null&&(e=fs((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),me.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=me.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>us(r,t.codec()),t.decode=(r,n)=>as(r,t.codec(),n)})(Fc||(Fc={}));var ro={};de(ro,{MAX_RSA_KEY_SIZE:()=>ri,generateRSAKeyPair:()=>np,jwkToJWKKeyPair:()=>op,jwkToPkcs1:()=>R1,jwkToPkix:()=>Wc,jwkToRSAPrivateKey:()=>rp,pkcs1ToJwk:()=>Qh,pkcs1ToRSAPrivateKey:()=>tp,pkixToJwk:()=>ep,pkixToRSAPublicKey:()=>Jc});var w1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint32Array(64),Hc=class extends en{constructor(){super(64,32,8,!1),this.A=tr[0]|0,this.B=tr[1]|0,this.C=tr[2]|0,this.D=tr[3]|0,this.E=tr[4]|0,this.F=tr[5]|0,this.G=tr[6]|0,this.H=tr[7]|0}get(){let{A:e,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[e,r,n,o,s,i,a,c]}set(e,r,n,o,s,i,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(e,r){for(let l=0;l<16;l++,r+=4)rr[l]=e.getUint32(r,!1);for(let l=16;l<64;l++){let p=rr[l-15],b=rr[l-2],g=at(p,7)^at(p,18)^p>>>3,w=at(b,17)^at(b,19)^b>>>10;rr[l]=w+rr[l-7]+g+rr[l-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){let p=at(a,6)^at(a,11)^at(a,25),b=u+p+Rd(a,c,f)+w1[l]+rr[l]|0,w=(at(n,2)^at(n,13)^at(n,22))+_d(n,o,s)|0;u=f,f=c,c=a,a=i+b|0,i=s,s=o,o=n,n=b+w|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,o,s,i,a,c,f,u)}roundClean(){rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var nn=Ko(()=>new Hc);var K=Mt(ch());function Er(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function nr(t,e,r=-1){let n=r,o=t,s=0,i=Math.pow(2,e);for(let a=1;a<8;a++){if(t<i){let c;if(n<0)c=new ArrayBuffer(a),s=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),s=n}let f=new Uint8Array(c);for(let u=a-1;u>=0;u--){let l=Math.pow(2,u*e);f[s-u-1]=Math.floor(o/l),o-=f[s-u-1]*l}return c}i*=Math.pow(2,e)}return new ArrayBuffer(0)}function ps(...t){let e=0,r=0;for(let s of t)e+=s.length;let n=new ArrayBuffer(e),o=new Uint8Array(n);for(let s of t)o.set(s,r),r+=s.length;return o}function $c(){let t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let a=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}let e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;let n=Er(r,8),o=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(o);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=t[a];return s[0]&=127,Er(s,8)-n}function uh(t){let e=t<0?t*-1:t,r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){let i=r-e,a=nr(i,8,n),c=new Uint8Array(a);return c[0]|=128,a}let o=nr(e,8,n),s=new Uint8Array(o);if(s[0]&128){let i=o.slice(0),a=new Uint8Array(i);o=new ArrayBuffer(o.byteLength+1),s=new Uint8Array(o);for(let c=0;c<i.byteLength;c++)s[c+1]=a[c];s[0]=0}return o}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function lh(t,e){if(t.byteLength!==e.byteLength)return!1;let r=new Uint8Array(t),n=new Uint8Array(e);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0}function Ve(t,e){let r=t.toString(10);if(e<r.length)return"";let n=e-r.length,o=new Array(n);for(let i=0;i<n;i++)o[i]="0";return o.join("").concat(r)}var y3=Math.log(2);function ms(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function jc(t){let e=0,r=0;for(let o=0;o<t.length;o++){let s=t[o];e+=s.byteLength}let n=new Uint8Array(e);for(let o=0;o<t.length;o++){let s=t[o];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function Dt(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}var Wn=class{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return jc(this.items)}},Gn=[new Uint8Array([1])],fh="0123456789";var un="",ft=new ArrayBuffer(0),zc=new Uint8Array(0),Jn="EndOfContent",hh="OCTET STRING",ph="BIT STRING";function Ot(t){var e;return e=class extends t{constructor(...n){var o;super(...n);let s=n[0]||{};this.isHexOnly=(o=s.isHexOnly)!==null&&o!==void 0?o:!1,this.valueHexView=s.valueHex?K.BufferSourceConverter.toUint8Array(s.valueHex):zc}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,o,s){let i=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!Dt(this,i,o,s))return-1;let a=o+s;return this.valueHexView=i.subarray(o,a),this.valueHexView.length?(this.blockLength=s,a):(this.warnings.push("Zero buffer length"),o)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ft)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:K.Convert.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}var Rt=class{constructor({blockLength:e=0,error:r=un,warnings:n=[],valueBeforeDecode:o=zc}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=K.BufferSourceConverter.toUint8Array(o)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:K.Convert.ToHex(this.valueBeforeDecodeView)}}};Rt.NAME="baseBlock";var Te=class extends Rt{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};Te.NAME="valueBlock";var gs=class extends Ot(Rt){constructor({idBlock:e={}}={}){var r,n,o,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?K.BufferSourceConverter.toUint8Array(e.valueHex):zc,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(o=e.tagNumber)!==null&&o!==void 0?o:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",ft}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){let o=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,o[0]=r}return o.buffer}if(!this.isHexOnly){let o=nr(this.tagNumber,7),s=new Uint8Array(o),i=o.byteLength,a=new Uint8Array(i+1);if(a[0]=r|31,!e){for(let c=0;c<i-1;c++)a[c+1]=s[c]|128;a[i]=s[i-1]}return a.buffer}let n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){let o=this.valueHexView;for(let s=0;s<o.length-1;s++)n[s+1]=o[s]|128;n[this.valueHexView.byteLength]=o[o.length-1]}return n.buffer}fromBER(e,r,n){let o=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,o,r,n))return-1;let s=o.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;let a=s[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,f=this.valueHexView=new Uint8Array(255),u=255;for(;s[c]&128;){if(f[c-1]=s[c]&127,c++,c>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;let p=new Uint8Array(u);for(let b=0;b<f.length;b++)p[b]=f[b];f=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,f[c-1]=s[c]&127;let l=new Uint8Array(c);for(let p=0;p<c;p++)l[p]=f[p];f=this.valueHexView=new Uint8Array(c),f.set(l),this.blockLength<=9?this.tagNumber=Er(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};gs.NAME="identificationBlock";var ys=class extends Rt{constructor({lenBlock:e={}}={}){var r,n,o;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(o=e.length)!==null&&o!==void 0?o:0}fromBER(e,r,n){let o=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,o,r,n))return-1;let s=o.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;let i=s[0]&127;if(i>8)return this.error="Too big integer",-1;if(i+1>s.length)return this.error="End of input reached before message was fully decoded",-1;let a=r+1,c=o.subarray(a,a+i);return c[i-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Er(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){let o=nr(this.length,8);if(o.byteLength>127)return this.error="Too big length",ft;if(r=new ArrayBuffer(o.byteLength+1),e)return r;let s=new Uint8Array(o);n=new Uint8Array(r),n[0]=o.byteLength|128;for(let i=0;i<o.byteLength;i++)n[i+1]=s[i];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};ys.NAME="lengthBlock";var R={},Ae=class extends Rt{constructor({name:e=un,optional:r=!1,primitiveSchema:n,...o}={},s){super(o),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new gs(o),this.lenBlock=new ys(o),this.valueBlock=s?new s(o):new Te(o)}fromBER(e,r,n){let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}toBER(e,r){let n=r||new Wn;r||mh(this);let o=this.idBlock.toBER(e);if(n.write(o),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{let s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;let i=this.lenBlock.toBER(e);n.write(i),n.write(s)}return r?ft:n.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():K.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${K.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let r=this.toBER(),n=e.toBER();return lh(r,n)}};Ae.NAME="BaseBlock";function mh(t){if(t instanceof R.Constructed)for(let e of t.valueBlock.value)mh(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}var ws=class extends Ae{constructor({value:e=un,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};ws.NAME="BaseStringBlock";var xs=class extends Ot(Te){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}};xs.NAME="PrimitiveValueBlock";var gh,bs=class extends Ae{constructor(e={}){super(e,xs),this.idBlock.isConstructed=!1}};gh=bs;R.Primitive=gh;bs.NAME="PRIMITIVE";function C1(t,e){if(t instanceof e)return t;let r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function ei(t,e=0,r=t.length){let n=e,o=new Ae({},Te),s=new Rt;if(!Dt(s,t,e,r))return o.error=s.error,{offset:-1,result:o};if(!t.subarray(e,e+r).length)return o.error="Zero buffer length",{offset:-1,result:o};let a=o.idBlock.fromBER(t,e,r);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),a===-1)return o.error=o.idBlock.error,{offset:-1,result:o};if(e=a,r-=o.idBlock.blockLength,a=o.lenBlock.fromBER(t,e,r),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),a===-1)return o.error=o.lenBlock.error,{offset:-1,result:o};if(e=a,r-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let c=Ae;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&o.idBlock.isHexOnly===!1)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};c=R.EndOfContent;break;case 1:c=R.Boolean;break;case 2:c=R.Integer;break;case 3:c=R.BitString;break;case 4:c=R.OctetString;break;case 5:c=R.Null;break;case 6:c=R.ObjectIdentifier;break;case 10:c=R.Enumerated;break;case 12:c=R.Utf8String;break;case 13:c=R.RelativeObjectIdentifier;break;case 14:c=R.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:c=R.Sequence;break;case 17:c=R.Set;break;case 18:c=R.NumericString;break;case 19:c=R.PrintableString;break;case 20:c=R.TeletexString;break;case 21:c=R.VideotexString;break;case 22:c=R.IA5String;break;case 23:c=R.UTCTime;break;case 24:c=R.GeneralizedTime;break;case 25:c=R.GraphicString;break;case 26:c=R.VisibleString;break;case 27:c=R.GeneralString;break;case 28:c=R.UniversalString;break;case 29:c=R.CharacterString;break;case 30:c=R.BmpString;break;case 31:c=R.DATE;break;case 32:c=R.TimeOfDay;break;case 33:c=R.DateTime;break;case 34:c=R.Duration;break;default:{let f=o.idBlock.isConstructed?new R.Constructed:new R.Primitive;f.idBlock=o.idBlock,f.lenBlock=o.lenBlock,f.warnings=o.warnings,o=f}}break;case 2:case 3:case 4:default:c=o.idBlock.isConstructed?R.Constructed:R.Primitive}return o=C1(o,c),a=o.fromBER(t,e,o.lenBlock.isIndefiniteForm?r:o.lenBlock.length),o.valueBeforeDecodeView=t.subarray(n,n+o.blockLength),{offset:a,result:o}}function qc(t){if(!t.byteLength){let e=new Ae({},Te);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ei(K.BufferSourceConverter.toUint8Array(t).slice(),0,t.byteLength)}function I1(t,e){return t?1:e}var xt=class extends Te{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){let o=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,o,r,n))return-1;if(this.valueBeforeDecodeView=o.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;I1(this.isIndefiniteForm,n)>0;){let i=ei(o,s,n);if(i.offset===-1)return this.error=i.result.error,this.warnings.concat(i.result.warnings),-1;if(s=i.offset,this.blockLength+=i.result.blockLength,n-=i.result.blockLength,this.value.push(i.result),this.isIndefiniteForm&&i.result.constructor.NAME===Jn)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Jn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){let n=r||new Wn;for(let o=0;o<this.value.length;o++)this.value[o].toBER(e,n);return r?ft:n.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let r of this.value)e.value.push(r.toJSON());return e}};xt.NAME="ConstructedValueBlock";var yh,or=class extends Ae{constructor(e={}){super(e,xt),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let o=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return o===-1?(this.error=this.valueBlock.error,o):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),o)}onAsciiEncoding(){let e=[];for(let n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(o=>`  ${o}`).join(`
`));let r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}};yh=or;R.Constructed=yh;or.NAME="CONSTRUCTED";var vs=class extends Te{fromBER(e,r,n){return r}toBER(e){return ft}};vs.override="EndOfContentValueBlock";var wh,Es=class extends Ae{constructor(e={}){super(e,vs),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};wh=Es;R.EndOfContent=wh;Es.NAME=Jn;var xh,sn=class extends Ae{constructor(e={}){super(e,Te),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){let n=new ArrayBuffer(2);if(!e){let o=new Uint8Array(n);o[0]=5,o[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}};xh=sn;R.Null=xh;sn.NAME="NULL";var Bs=class extends Ot(Te){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=K.BufferSourceConverter.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){let o=K.BufferSourceConverter.toUint8Array(e);return Dt(this,o,r,n)?(this.valueHexView=o.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,$c.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};Bs.NAME="BooleanValueBlock";var bh,As=class extends Ae{constructor(e={}){super(e,Bs),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};bh=As;R.Boolean=bh;As.NAME="BOOLEAN";var Ss=class extends Ot(xt){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let o=0;if(this.isConstructed){if(this.isHexOnly=!1,o=xt.prototype.fromBER.call(this,e,r,n),o===-1)return o;for(let s=0;s<this.value.length;s++){let i=this.value[s].constructor.NAME;if(i===Jn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(i!==hh)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,o=super.fromBER(e,r,n),this.blockLength=n;return o}toBER(e,r){return this.isConstructed?xt.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};Ss.NAME="OctetStringValueBlock";var vh,ks=class t extends Ae{constructor({idBlock:e={},lenBlock:r={},...n}={}){var o,s;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Ss),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){let s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){let i=ei(s,0,s.byteLength);i.offset!==-1&&i.offset===n&&(this.valueBlock.value=[i.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?or.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${K.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let r of this.valueBlock.value)r instanceof t&&e.push(r.valueBlock.valueHexView);return K.BufferSourceConverter.concat(e)}};vh=ks;R.OctetString=vh;ks.NAME=hh;var Cs=class extends Ot(xt){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let o=-1;if(this.isConstructed){if(o=xt.prototype.fromBER.call(this,e,r,n),o===-1)return o;for(let a of this.value){let c=a.constructor.NAME;if(c===Jn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==ph)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return o}let s=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,s,r,n))return-1;let i=s.subarray(r,r+n);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=i.subarray(1);try{if(a.byteLength){let c=ei(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=i.subarray(1),this.blockLength=i.length,r+n}toBER(e,r){if(this.isConstructed)return xt.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return ft;let n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};Cs.NAME="BitStringValueBlock";var Eh,an=class extends Ae{constructor({idBlock:e={},lenBlock:r={},...n}={}){var o,s;(o=n.isConstructed)!==null&&o!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Cs),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return or.prototype.onAsciiEncoding.call(this);{let e=[],r=this.valueBlock.valueHexView;for(let o of r)e.push(o.toString(2).padStart(8,"0"));let n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}};Eh=an;R.BitString=Eh;an.NAME=ph;var Bh;function U1(t,e){let r=new Uint8Array([0]),n=new Uint8Array(t),o=new Uint8Array(e),s=n.slice(0),i=s.length-1,a=o.slice(0),c=a.length-1,f=0,u=c<i?i:c,l=0;for(let p=u;p>=0;p--,l++){switch(!0){case l<a.length:f=s[i-l]+a[c-l]+r[0];break;default:f=s[i-l]+r[0]}switch(r[0]=f/10,!0){case l>=s.length:s=ps(new Uint8Array([f%10]),s);break;default:s[i-l]=f%10}}return r[0]>0&&(s=ps(r,s)),s}function dh(t){if(t>=Gn.length)for(let e=Gn.length;e<=t;e++){let r=new Uint8Array([0]),n=Gn[e-1].slice(0);for(let o=n.length-1;o>=0;o--){let s=new Uint8Array([(n[o]<<1)+r[0]]);r[0]=s[0]/10,n[o]=s[0]%10}r[0]>0&&(n=ps(r,n)),Gn.push(n)}return Gn[t]}function T1(t,e){let r=0,n=new Uint8Array(t),o=new Uint8Array(e),s=n.slice(0),i=s.length-1,a=o.slice(0),c=a.length-1,f,u=0;for(let l=c;l>=0;l--,u++)switch(f=s[i-u]-a[c-u]-r,!0){case f<0:r=1,s[i-u]=f+10;break;default:r=0,s[i-u]=f}if(r>0)for(let l=i-c+1;l>=0;l--,u++)if(f=s[i-u]-r,f<0)r=1,s[i-u]=f+10;else{r=0,s[i-u]=f;break}return s.slice()}var Zn=class extends Ot(Te){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=$c.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(uh(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,o=0){let s=this.fromBER(e,r,n);if(s===-1)return s;let i=this.valueHexView;return i[0]===0&&(i[1]&128)!==0?this.valueHexView=i.subarray(1):o!==0&&i.length<o&&(o-i.length>1&&(o=i.length+1),this.valueHexView=i.subarray(o-i.length)),s}toDER(e=!1){let r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{let n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){let o=super.fromBER(e,r,n);return o===-1||this.setValueHex(),o}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e=this.valueHexView.length*8-1,r=new Uint8Array(this.valueHexView.length*8/3),n=0,o,s=this.valueHexView,i="",a=!1;for(let c=s.byteLength-1;c>=0;c--){o=s[c];for(let f=0;f<8;f++){if((o&1)===1)switch(n){case e:r=T1(dh(n),r),i="-";break;default:r=U1(r,dh(n))}n++,o>>=1}}for(let c=0;c<r.length;c++)r[c]&&(a=!0),a&&(i+=fh.charAt(r[c]));return a===!1&&(i+=fh.charAt(0)),i}};Bh=Zn;Zn.NAME="IntegerValueBlock";Object.defineProperty(Bh.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Ah,Se=class t extends Ae{constructor(e={}){super(e,Zn),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return ms(),BigInt(this.valueBlock.toString())}static fromBigInt(e){ms();let r=BigInt(e),n=new Wn,o=r.toString(16).replace(/^-/,""),s=new Uint8Array(K.Convert.FromHex(o));if(r<0){let a=new Uint8Array(s.length+(s[0]&128?1:0));a[0]|=128;let f=BigInt(`0x${K.Convert.ToHex(a)}`)+r,u=K.BufferSourceConverter.toUint8Array(K.Convert.FromHex(f.toString(16)));u[0]|=128,n.write(u)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new t({valueHex:n.final()})}convertToDER(){let e=new t({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new t({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};Ah=Se;R.Integer=Ah;Se.NAME="INTEGER";var Sh,Is=class extends Se{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};Sh=Is;R.Enumerated=Sh;Is.NAME="ENUMERATED";var Xn=class extends Ot(Te){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;let o=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,o,r,n))return-1;let s=o.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,(s[a]&128)!==0);a++);let i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)i[a]=this.valueHexView[a];return this.valueHexView=i,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Er(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){ms();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;let n=new Uint8Array(r.length/7);for(let o=0;o<n.length;o++)n[o]=parseInt(r.slice(o*7,o*7+7),2)+(o+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,s=new Uint8Array(this.blockLength);for(let i=0;i<this.blockLength-1;i++)s[i]=o[i]|128;return s[this.blockLength-1]=o[this.blockLength-1],s.buffer}let r=nr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",ft;let n=new Uint8Array(r.byteLength);if(!e){let o=new Uint8Array(r),s=r.byteLength-1;for(let i=0;i<s;i++)n[i]=o[i]|128;n[s]=o[s]}return n}toString(){let e="";if(this.isHexOnly)e=K.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};Xn.NAME="sidBlock";var Us=class extends Te{constructor({value:e=un,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let o=r;for(;n>0;){let s=new Xn;if(o=s.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=s.error,o;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return o}toBER(e){let r=[];for(let n=0;n<this.value.length;n++){let o=this.value[n].toBER(e);if(o.byteLength===0)return this.error=this.value[n].error,ft;r.push(o)}return jc(r)}fromString(e){this.value=[];let r=0,n=0,o="",s=!1;do if(n=e.indexOf(".",r),n===-1?o=e.substring(r):o=e.substring(r,n),r=n+1,s){let i=this.value[0],a=0;switch(i.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}let c=parseInt(o,10);if(isNaN(c))return;i.valueDec=c+a,s=!1}else{let i=new Xn;if(o>Number.MAX_SAFE_INTEGER){ms();let a=BigInt(o);i.valueBigInt=a}else if(i.valueDec=parseInt(o,10),isNaN(i.valueDec))return;this.value.length||(i.isFirstSid=!0,s=!0),this.value.push(i)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),r?(o=`{${o}}`,this.value[n].isFirstSid?e=`2.{${o} - 80}`:e+=o):e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};Us.NAME="ObjectIdentifierValueBlock";var kh,cn=class extends Ae{constructor(e={}){super(e,Us),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};kh=cn;R.ObjectIdentifier=kh;cn.NAME="OBJECT IDENTIFIER";var Yn=class extends Ot(Rt){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;let o=K.BufferSourceConverter.toUint8Array(e);if(!Dt(this,o,r,n))return-1;let s=o.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,(s[a]&128)!==0);a++);let i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)i[a]=this.valueHexView[a];return this.valueHexView=i,(s[this.blockLength-1]&128)!==0?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Er(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let o=this.valueHexView,s=new Uint8Array(this.blockLength);for(let i=0;i<this.blockLength-1;i++)s[i]=o[i]|128;return s[this.blockLength-1]=o[this.blockLength-1],s.buffer}let r=nr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",ft;let n=new Uint8Array(r.byteLength);if(!e){let o=new Uint8Array(r),s=r.byteLength-1;for(let i=0;i<s;i++)n[i]=o[i]|128;n[s]=o[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=K.Convert.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};Yn.NAME="relativeSidBlock";var Ts=class extends Te{constructor({value:e=un,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let o=r;for(;n>0;){let s=new Yn;if(o=s.fromBER(e,o,n),o===-1)return this.blockLength=0,this.error=s.error,o;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return o}toBER(e,r){let n=[];for(let o=0;o<this.value.length;o++){let s=this.value[o].toBER(e);if(s.byteLength===0)return this.error=this.value[o].error,ft;n.push(s)}return jc(n)}fromString(e){this.value=[];let r=0,n=0,o="";do{n=e.indexOf(".",r),n===-1?o=e.substring(r):o=e.substring(r,n),r=n+1;let s=new Yn;if(s.valueDec=parseInt(o,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let o=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(o=`{${o}}`),e+=o}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}};Ts.NAME="RelativeObjectIdentifierValueBlock";var Ch,Ns=class extends Ae{constructor(e={}){super(e,Ts),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};Ch=Ns;R.RelativeObjectIdentifier=Ch;Ns.NAME="RelativeObjectIdentifier";var Ih,_t=class extends or{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};Ih=_t;R.Sequence=Ih;_t.NAME="SEQUENCE";var Uh,Ps=class extends or{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};Uh=Ps;R.Set=Uh;Ps.NAME="SET";var Rs=class extends Ot(Te){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=un}toJSON(){return{...super.toJSON(),value:this.value}}};Rs.NAME="StringValueBlock";var _s=class extends Rs{};_s.NAME="SimpleStringValueBlock";var Re=class extends ws{constructor({...e}={}){super(e,_s)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,K.BufferSourceConverter.toUint8Array(e))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);this.valueBlock.value=e}};Re.NAME="SIMPLE STRING";var Ls=class extends Re{fromBuffer(e){this.valueBlock.valueHexView=K.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=K.Convert.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=K.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(K.Convert.FromUtf8String(e)),this.valueBlock.value=e}};Ls.NAME="Utf8StringValueBlock";var Th,Lt=class extends Ls{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};Th=Lt;R.Utf8String=Th;Lt.NAME="UTF8String";var Ds=class extends Re{fromBuffer(e){this.valueBlock.value=K.Convert.ToUtf16String(e),this.valueBlock.valueHexView=K.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(K.Convert.FromUtf16String(e))}};Ds.NAME="BmpStringValueBlock";var Nh,Os=class extends Ds{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};Nh=Os;R.BmpString=Nh;Os.NAME="BMPString";var Vs=class extends Re{fromBuffer(e){let r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let o=0;o<n.length;o+=4)n[o]=n[o+3],n[o+1]=n[o+2],n[o+2]=0,n[o+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){let r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let o=0;o<r;o++){let s=nr(e.charCodeAt(o),8),i=new Uint8Array(s);if(i.length>4)continue;let a=4-i.length;for(let c=i.length-1;c>=0;c--)n[o*4+c+a]=i[c]}this.valueBlock.value=e}};Vs.NAME="UniversalStringValueBlock";var Ph,Fs=class extends Vs{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};Ph=Fs;R.UniversalString=Ph;Fs.NAME="UniversalString";var Rh,Hs=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};Rh=Hs;R.NumericString=Rh;Hs.NAME="NumericString";var _h,Ms=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};_h=Ms;R.PrintableString=_h;Ms.NAME="PrintableString";var Lh,$s=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};Lh=$s;R.TeletexString=Lh;$s.NAME="TeletexString";var Dh,js=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};Dh=js;R.VideotexString=Dh;js.NAME="VideotexString";var Oh,zs=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};Oh=zs;R.IA5String=Oh;zs.NAME="IA5String";var Vh,qs=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};Vh=qs;R.GraphicString=Vh;qs.NAME="GraphicString";var Fh,Qn=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};Fh=Qn;R.VisibleString=Fh;Qn.NAME="VisibleString";var Hh,Ks=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};Hh=Ks;R.GeneralString=Hh;Ks.NAME="GeneralString";var Mh,Gs=class extends Re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};Mh=Gs;R.CharacterString=Mh;Gs.NAME="CharacterString";var $h,eo=class extends Qn{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let o=0;o<e.length;o++)this.valueBlock.valueHexView[o]=e.charCodeAt(o)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,K.BufferSourceConverter.toUint8Array(e)))}toBuffer(){let e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}let o=parseInt(n[1],10);o>=50?this.year=1900+o:this.year=2e3+o,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){let r=new Array(7);return r[0]=Ve(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=Ve(this.month,2),r[2]=Ve(this.day,2),r[3]=Ve(this.hour,2),r[4]=Ve(this.minute,2),r[5]=Ve(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};$h=eo;R.UTCTime=$h;eo.NAME="UTCTime";var jh,Ws=class extends eo{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",o="",s=0,i,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{let l=new Number(e[e.length-1]);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let l=1,p=n.indexOf("+"),b="";if(p===-1&&(p=n.indexOf("-"),l=-1),p!==-1){if(b=n.substring(p+1),n=n.substring(0,p),b.length!==2&&b.length!==4)throw new Error("Wrong input string for conversion");let g=parseInt(b.substring(0,2),10);if(isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");if(a=l*g,b.length===4){if(g=parseInt(b.substring(2,4),10),isNaN(g.valueOf()))throw new Error("Wrong input string for conversion");c=l*g}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){let l=new Number(`0${n.substring(f)}`);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");s=l.valueOf(),o=n.substring(0,f)}else o=n;switch(!0){case o.length===8:if(i=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case o.length===10:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*s;this.minute=Math.floor(l),l=60*(l-this.minute),this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===12:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=60*s;this.second=Math.floor(l),l=1e3*(l-this.second),this.millisecond=Math.floor(l)}break;case o.length===14:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let l=1e3*s;this.millisecond=Math.floor(l)}break;default:throw new Error("Wrong input string for conversion")}let u=i.exec(o);if(u===null)throw new Error("Wrong input string for conversion");for(let l=1;l<u.length;l++)switch(l){case 1:this.year=parseInt(u[l],10);break;case 2:this.month=parseInt(u[l],10);break;case 3:this.day=parseInt(u[l],10);break;case 4:this.hour=parseInt(u[l],10)+a;break;case 5:this.minute=parseInt(u[l],10)+c;break;case 6:this.second=parseInt(u[l],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){let l=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=l.getUTCFullYear(),this.month=l.getUTCMonth(),this.day=l.getUTCDay(),this.hour=l.getUTCHours(),this.minute=l.getUTCMinutes(),this.second=l.getUTCSeconds(),this.millisecond=l.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){let r=[];return r.push(Ve(this.year,4)),r.push(Ve(this.month,2)),r.push(Ve(this.day,2)),r.push(Ve(this.hour,2)),r.push(Ve(this.minute,2)),r.push(Ve(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(Ve(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};jh=Ws;R.GeneralizedTime=jh;Ws.NAME="GeneralizedTime";var zh,Js=class extends Lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};zh=Js;R.DATE=zh;Js.NAME="DATE";var qh,Zs=class extends Lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};qh=Zs;R.TimeOfDay=qh;Zs.NAME="TimeOfDay";var Kh,Xs=class extends Lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};Kh=Xs;R.DateTime=Kh;Xs.NAME="DateTime";var Gh,Ys=class extends Lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};Gh=Ys;R.Duration=Gh;Ys.NAME="Duration";var Wh,Qs=class extends Lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};Wh=Qs;R.TIME=Wh;Qs.NAME="TIME";var to=class extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}},ti=class extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}};var Jh={get(t=globalThis){let e=t.crypto;if(e?.subtle==null)throw new ti("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};var sr=Jh;async function Zh(t){let e=await sr.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await P1(e);return{privateKey:r[0],publicKey:r[1]}}async function Xh(t,e){let r=await sr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await sr.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(n,0,n.byteLength)}async function Yh(t,e,r){let n=await sr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return sr.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}async function P1(t){if(t.privateKey==null||t.publicKey==null)throw new ue("Private and public key are required");return Promise.all([sr.get().subtle.exportKey("jwk",t.privateKey),sr.get().subtle.exportKey("jwk",t.publicKey)])}function Kc(t){if(t.kty!=="RSA")throw new ue("invalid key type");if(t.n==null)throw new ue("invalid key modulus");return te(t.n,"base64url").length*8}var ln=class{type="RSA";_key;_raw;_multihash;constructor(e,r){this._key=e,this._multihash=r}get raw(){return this._raw==null&&(this._raw=ro.jwkToPkix(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return A.createV1(114,this._multihash)}toString(){return se.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:qe(this.raw,e.raw)}verify(e,r){return Yh(this._key,r,e)}},no=class{type="RSA";_key;_raw;publicKey;constructor(e,r){this._key=e,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=ro.jwkToPkcs1(this._key)),this._raw}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:qe(this.raw,e.raw)}sign(e){return Xh(this._key,e)}};var ri=8192,Gc=18;function Qh(t){let{result:e}=qc(t),r=e.valueBlock.value;return{n:bt(r[1]),e:bt(r[2]),d:bt(r[3]),p:bt(r[4]),q:bt(r[5]),dp:bt(r[6]),dq:bt(r[7]),qi:bt(r[8]),kty:"RSA",alg:"RS256"}}function R1(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ue("JWK was missing components");let r=new _t({value:[new Se({value:0}),Se.fromBigInt(vt(te(t.n,"base64url"))),Se.fromBigInt(vt(te(t.e,"base64url"))),Se.fromBigInt(vt(te(t.d,"base64url"))),Se.fromBigInt(vt(te(t.p,"base64url"))),Se.fromBigInt(vt(te(t.q,"base64url"))),Se.fromBigInt(vt(te(t.dp,"base64url"))),Se.fromBigInt(vt(te(t.dq,"base64url"))),Se.fromBigInt(vt(te(t.qi,"base64url")))]}).toBER();return new Uint8Array(r,0,r.byteLength)}function ep(t){let{result:e}=qc(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:bt(r[0]),e:bt(r[1])}}function Wc(t){if(t.n==null||t.e==null)throw new ue("JWK was missing components");let r=new _t({value:[new _t({value:[new cn({value:"1.2.840.113549.1.1.1"}),new sn]}),new an({valueHex:new _t({value:[Se.fromBigInt(vt(te(t.n,"base64url"))),Se.fromBigInt(vt(te(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function bt(t){let e=t.valueBlock.valueHexView;for(;e[0]===0;)e=e.subarray(1);return ee(e,"base64url")}function vt(t){let e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}function tp(t){let e=Qh(t);return rp(e)}function Jc(t){let e=ep(t);if(Kc(e)>ri)throw new Wr("Key size is too large");let r=nn(wt.encode({Type:me.RSA,Data:t})),n=tt(Gc,r);return new ln(e,n)}function rp(t){if(Kc(t)>ri)throw new ue("Key size is too large");let e=op(t),r=nn(wt.encode({Type:me.RSA,Data:Wc(e.publicKey)})),n=tt(Gc,r);return new no(e.privateKey,new ln(e.publicKey,n))}async function np(t){if(t>ri)throw new ue("Key size is too large");let e=await Zh(t),r=nn(wt.encode({Type:me.RSA,Data:Wc(e.publicKey)})),n=tt(Gc,r);return new no(e.privateKey,new ln(e.publicKey,n))}function op(t){if(t==null)throw new ue("Missing key parameter");return{privateKey:t,publicKey:{kty:t.kty,n:t.n,e:t.e}}}var ni=class extends Qr{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Td(e);let n=Mn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?e.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(e){return Yr(this),this.iHash.update(e),this}digestInto(e){Yr(this),Xr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return e=e,e.finished=o,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Zc=(t,e,r)=>new ni(t,e).update(r).digest();Zc.create=(t,e)=>new ni(t,e);function sp(t){t.lowS!==void 0&&ct("lowS",t.lowS),t.prehash!==void 0&&ct("prehash",t.prehash)}function _1(t){let e=zn(t);yt(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=e;if(r){if(!n.eql(o,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:L1,hexToBytes:D1}=Xo,Xc=class extends Error{constructor(e=""){super(e)}},Vt={Err:Xc,_tlv:{encode:(t,e)=>{let{Err:r}=Vt;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");let n=e.length/2,o=mr(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?mr(o.length/2|128):"";return mr(t)+s+o+e},decode(t,e){let{Err:r}=Vt,n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");let o=e[n++],s=!!(o&128),i=0;if(!s)i=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let f=e.subarray(n,n+c);if(f.length!==c)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let u of f)i=i<<8|u;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=e.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+i)}}},_int:{encode(t){let{Err:e}=Vt;if(t<Ft)throw new e("integer: negative integers are not allowed");let r=mr(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){let{Err:e}=Vt;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return L1(t)}},toSig(t){let{Err:e,_int:r,_tlv:n}=Vt,o=typeof t=="string"?D1(t):t;tn(o);let{v:s,l:i}=n.decode(48,o);if(i.length)throw new e("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:f,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){let{_tlv:e,_int:r}=Vt,n=e.encode(2,r.encode(t.r)),o=e.encode(2,r.encode(t.s)),s=n+o;return e.encode(48,s)}},Ft=BigInt(0),ve=BigInt(1),G3=BigInt(2),ip=BigInt(3),W3=BigInt(4);function O1(t){let e=_1(t),{Fp:r}=e,n=Qt(e.n,e.nBitLength),o=e.toBytes||((w,m,v)=>{let k=m.toAffine();return Nt(Uint8Array.from([4]),r.toBytes(k.x),r.toBytes(k.y))}),s=e.fromBytes||(w=>{let m=w.subarray(1),v=r.fromBytes(m.subarray(0,r.BYTES)),k=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:v,y:k}});function i(w){let{a:m,b:v}=e,k=r.sqr(w),y=r.mul(k,w);return r.add(r.add(y,r.mul(w,m)),v)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return $n(w,ve,e.n)}function c(w){let{allowedPrivateKeyLengths:m,nByteLength:v,wrapPrivateKey:k,n:y}=e;if(m&&typeof w!="bigint"){if(Zt(w)&&(w=Ut(w)),typeof w!="string"||!m.includes(w.length))throw new Error("invalid private key");w=w.padStart(v*2,"0")}let C;try{C=typeof w=="bigint"?w:Tt(le("private key",w,v))}catch{throw new Error("invalid private key, expected hex or "+v+" bytes, got "+typeof w)}return k&&(C=ne(C,y)),De("private key",C,ve,y),C}function f(w){if(!(w instanceof p))throw new Error("ProjectivePoint expected")}let u=wr((w,m)=>{let{px:v,py:k,pz:y}=w;if(r.eql(y,r.ONE))return{x:v,y:k};let C=w.is0();m==null&&(m=C?r.ONE:r.inv(y));let D=r.mul(v,m),_=r.mul(k,m),U=r.mul(y,m);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:D,y:_}}),l=wr(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}let{x:m,y:v}=w.toAffine();if(!r.isValid(m)||!r.isValid(v))throw new Error("bad point: x or y not FE");let k=r.sqr(v),y=i(m);if(!r.eql(k,y))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(m,v,k){if(this.px=m,this.py=v,this.pz=k,m==null||!r.isValid(m))throw new Error("x required");if(v==null||!r.isValid(v))throw new Error("y required");if(k==null||!r.isValid(k))throw new Error("z required");Object.freeze(this)}static fromAffine(m){let{x:v,y:k}=m||{};if(!m||!r.isValid(v)||!r.isValid(k))throw new Error("invalid affine point");if(m instanceof p)throw new Error("projective point not allowed");let y=C=>r.eql(C,r.ZERO);return y(v)&&y(k)?p.ZERO:new p(v,k,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){let v=r.invertBatch(m.map(k=>k.pz));return m.map((k,y)=>k.toAffine(v[y])).map(p.fromAffine)}static fromHex(m){let v=p.fromAffine(s(le("pointHex",m)));return v.assertValidity(),v}static fromPrivateKey(m){return p.BASE.multiply(c(m))}static msm(m,v){return ts(p,n,m,v)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){l(this)}hasEvenY(){let{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){f(m);let{px:v,py:k,pz:y}=this,{px:C,py:D,pz:_}=m,U=r.eql(r.mul(v,_),r.mul(C,y)),T=r.eql(r.mul(k,_),r.mul(D,y));return U&&T}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:m,b:v}=e,k=r.mul(v,ip),{px:y,py:C,pz:D}=this,_=r.ZERO,U=r.ZERO,T=r.ZERO,P=r.mul(y,y),ie=r.mul(C,C),Z=r.mul(D,D),q=r.mul(y,C);return q=r.add(q,q),T=r.mul(y,D),T=r.add(T,T),_=r.mul(m,T),U=r.mul(k,Z),U=r.add(_,U),_=r.sub(ie,U),U=r.add(ie,U),U=r.mul(_,U),_=r.mul(q,_),T=r.mul(k,T),Z=r.mul(m,Z),q=r.sub(P,Z),q=r.mul(m,q),q=r.add(q,T),T=r.add(P,P),P=r.add(T,P),P=r.add(P,Z),P=r.mul(P,q),U=r.add(U,P),Z=r.mul(C,D),Z=r.add(Z,Z),P=r.mul(Z,q),_=r.sub(_,P),T=r.mul(Z,ie),T=r.add(T,T),T=r.add(T,T),new p(_,U,T)}add(m){f(m);let{px:v,py:k,pz:y}=this,{px:C,py:D,pz:_}=m,U=r.ZERO,T=r.ZERO,P=r.ZERO,ie=e.a,Z=r.mul(e.b,ip),q=r.mul(v,C),he=r.mul(k,D),N=r.mul(y,_),V=r.add(v,k),B=r.add(C,D);V=r.mul(V,B),B=r.add(q,he),V=r.sub(V,B),B=r.add(v,y);let x=r.add(C,_);return B=r.mul(B,x),x=r.add(q,N),B=r.sub(B,x),x=r.add(k,y),U=r.add(D,_),x=r.mul(x,U),U=r.add(he,N),x=r.sub(x,U),P=r.mul(ie,B),U=r.mul(Z,N),P=r.add(U,P),U=r.sub(he,P),P=r.add(he,P),T=r.mul(U,P),he=r.add(q,q),he=r.add(he,q),N=r.mul(ie,N),B=r.mul(Z,B),he=r.add(he,N),N=r.sub(q,N),N=r.mul(ie,N),B=r.add(B,N),q=r.mul(he,B),T=r.add(T,q),q=r.mul(x,B),U=r.mul(V,U),U=r.sub(U,q),q=r.mul(V,he),P=r.mul(x,P),P=r.add(P,q),new p(U,T,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(p.ZERO)}wNAF(m){return g.wNAFCached(this,m,p.normalizeZ)}multiplyUnsafe(m){let{endo:v,n:k}=e;De("scalar",m,Ft,k);let y=p.ZERO;if(m===Ft)return y;if(this.is0()||m===ve)return this;if(!v||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,m,p.normalizeZ);let{k1neg:C,k1:D,k2neg:_,k2:U}=v.splitScalar(m),T=y,P=y,ie=this;for(;D>Ft||U>Ft;)D&ve&&(T=T.add(ie)),U&ve&&(P=P.add(ie)),ie=ie.double(),D>>=ve,U>>=ve;return C&&(T=T.negate()),_&&(P=P.negate()),P=new p(r.mul(P.px,v.beta),P.py,P.pz),T.add(P)}multiply(m){let{endo:v,n:k}=e;De("scalar",m,ve,k);let y,C;if(v){let{k1neg:D,k1:_,k2neg:U,k2:T}=v.splitScalar(m),{p:P,f:ie}=this.wNAF(_),{p:Z,f:q}=this.wNAF(T);P=g.constTimeNegate(D,P),Z=g.constTimeNegate(U,Z),Z=new p(r.mul(Z.px,v.beta),Z.py,Z.pz),y=P.add(Z),C=ie.add(q)}else{let{p:D,f:_}=this.wNAF(m);y=D,C=_}return p.normalizeZ([y,C])[0]}multiplyAndAddUnsafe(m,v,k){let y=p.BASE,C=(_,U)=>U===Ft||U===ve||!_.equals(y)?_.multiplyUnsafe(U):_.multiply(U),D=C(this,v).add(C(m,k));return D.is0()?void 0:D}toAffine(m){return u(this,m)}isTorsionFree(){let{h:m,isTorsionFree:v}=e;if(m===ve)return!0;if(v)return v(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:m,clearCofactor:v}=e;return m===ve?this:v?v(p,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return ct("isCompressed",m),this.assertValidity(),o(p,this,m)}toHex(m=!0){return ct("isCompressed",m),Ut(this.toRawBytes(m))}}p.BASE=new p(e.Gx,e.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let b=e.nBitLength,g=es(p,e.endo?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function V1(t){let e=zn(t);return yt(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ap(t){let e=V1(t),{Fp:r,n}=e,o=r.BYTES+1,s=2*r.BYTES+1;function i(N){return ne(N,n)}function a(N){return Yo(N,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:l}=O1({...e,toBytes(N,V,B){let x=V.toAffine(),S=r.toBytes(x.x),L=Nt;return ct("isCompressed",B),B?L(Uint8Array.from([V.hasEvenY()?2:3]),S):L(Uint8Array.from([4]),S,r.toBytes(x.y))},fromBytes(N){let V=N.length,B=N[0],x=N.subarray(1);if(V===o&&(B===2||B===3)){let S=Tt(x);if(!$n(S,ve,r.ORDER))throw new Error("Point is not on curve");let L=u(S),F;try{F=r.sqrt(L)}catch(G){let M=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+M)}let H=(F&ve)===ve;return(B&1)===1!==H&&(F=r.neg(F)),{x:S,y:F}}else if(V===s&&B===4){let S=r.fromBytes(x.subarray(0,r.BYTES)),L=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:S,y:L}}else{let S=o,L=s;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+L+", got "+V)}}}),p=N=>Ut(Yt(N,e.nByteLength));function b(N){let V=n>>ve;return N>V}function g(N){return b(N)?i(-N):N}let w=(N,V,B)=>Tt(N.slice(V,B));class m{constructor(V,B,x){this.r=V,this.s=B,this.recovery=x,this.assertValidity()}static fromCompact(V){let B=e.nByteLength;return V=le("compactSignature",V,B*2),new m(w(V,0,B),w(V,B,2*B))}static fromDER(V){let{r:B,s:x}=Vt.toSig(le("DER",V));return new m(B,x)}assertValidity(){De("r",this.r,ve,n),De("s",this.s,ve,n)}addRecoveryBit(V){return new m(this.r,this.s,V)}recoverPublicKey(V){let{r:B,s:x,recovery:S}=this,L=_(le("msgHash",V));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");let F=S===2||S===3?B+e.n:B;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let H=(S&1)===0?"02":"03",z=c.fromHex(H+p(F)),G=a(F),M=i(-L*G),Q=i(x*G),oe=c.BASE.multiplyAndAddUnsafe(z,M,Q);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return gr(this.toDERHex())}toDERHex(){return Vt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gr(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let v={isValidPrivateKey(N){try{return f(N),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let N=wc(e.n);return jd(e.randomBytes(N),e.n)},precompute(N=8,V=c.BASE){return V._setWindowSize(N),V.multiply(BigInt(3)),V}};function k(N,V=!0){return c.fromPrivateKey(N).toRawBytes(V)}function y(N){let V=Zt(N),B=typeof N=="string",x=(V||B)&&N.length;return V?x===o||x===s:B?x===2*o||x===2*s:N instanceof c}function C(N,V,B=!0){if(y(N))throw new Error("first arg must be private key");if(!y(V))throw new Error("second arg must be public key");return c.fromHex(V).multiply(f(N)).toRawBytes(B)}let D=e.bits2int||function(N){if(N.length>8192)throw new Error("input is too large");let V=Tt(N),B=N.length*8-e.nBitLength;return B>0?V>>BigInt(B):V},_=e.bits2int_modN||function(N){return i(D(N))},U=jn(e.nBitLength);function T(N){return De("num < 2^"+e.nBitLength,N,Ft,U),Yt(N,e.nByteLength)}function P(N,V,B=ie){if(["recovered","canonical"].some(we=>we in B))throw new Error("sign() legacy options not supported");let{hash:x,randomBytes:S}=e,{lowS:L,prehash:F,extraEntropy:H}=B;L==null&&(L=!0),N=le("msgHash",N),sp(B),F&&(N=le("prehashed msgHash",x(N)));let z=_(N),G=f(V),M=[T(G),T(z)];if(H!=null&&H!==!1){let we=H===!0?S(r.BYTES):H;M.push(le("extraEntropy",we))}let Q=Nt(...M),oe=z;function ye(we){let Ee=D(we);if(!l(Ee))return;let ke=a(Ee),_e=c.BASE.multiply(Ee).toAffine(),Ne=i(_e.x);if(Ne===Ft)return;let pt=i(ke*i(oe+Ne*G));if(pt===Ft)return;let Et=(_e.x===Ne?0:2)|Number(_e.y&ve),xn=pt;return L&&b(pt)&&(xn=g(pt),Et^=1),new m(Ne,xn,Et)}return{seed:Q,k2sig:ye}}let ie={lowS:e.lowS,prehash:!1},Z={lowS:e.lowS,prehash:!1};function q(N,V,B=ie){let{seed:x,k2sig:S}=P(N,V,B),L=e;return pc(L.hash.outputLen,L.nByteLength,L.hmac)(x,S)}c.BASE._setWindowSize(8);function he(N,V,B,x=Z){let S=N;V=le("msgHash",V),B=le("publicKey",B);let{lowS:L,prehash:F,format:H}=x;if(sp(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");let z=typeof S=="string"||Zt(S),G=!z&&!H&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!z&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let M,Q;try{if(G&&(M=new m(S.r,S.s)),z){try{H!=="compact"&&(M=m.fromDER(S))}catch(Et){if(!(Et instanceof Vt.Err))throw Et}!M&&H!=="der"&&(M=m.fromCompact(S))}Q=c.fromHex(B)}catch{return!1}if(!M||L&&M.hasHighS())return!1;F&&(V=e.hash(V));let{r:oe,s:ye}=M,we=_(V),Ee=a(ye),ke=i(we*Ee),_e=i(oe*Ee),Ne=c.BASE.multiplyAndAddUnsafe(Q,ke,_e)?.toAffine();return Ne?i(Ne.x)===oe:!1}return{CURVE:e,getPublicKey:k,getSharedSecret:C,sign:q,verify:he,ProjectivePoint:c,Signature:m,utils:v}}function F1(t){return{hash:t,hmac:(e,...r)=>Zc(t,e,ac(...r)),randomBytes:Go}}function cp(t,e){let r=n=>ap({...t,...F1(n)});return{...r(e),create:r}}var fp=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),up=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),H1=BigInt(1),Yc=BigInt(2),lp=(t,e)=>(t+e/Yc)/e;function M1(t){let e=fp,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),f=t*t*t%e,u=f*f*t%e,l=ce(u,r,e)*u%e,p=ce(l,r,e)*u%e,b=ce(p,Yc,e)*f%e,g=ce(b,o,e)*b%e,w=ce(g,s,e)*g%e,m=ce(w,a,e)*w%e,v=ce(m,c,e)*m%e,k=ce(v,a,e)*w%e,y=ce(k,r,e)*u%e,C=ce(y,i,e)*g%e,D=ce(C,n,e)*f%e,_=ce(D,Yc,e);if(!Qc.eql(Qc.sqr(_),t))throw new Error("Cannot find square root");return _}var Qc=Qt(fp,void 0,void 0,{sqrt:M1}),Br=cp({a:BigInt(0),b:BigInt(7),Fp:Qc,n:up,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=up,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-H1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,i=BigInt("0x100000000000000000000000000000000"),a=lp(s*t,e),c=lp(-n*t,e),f=ne(t-a*r-c*o,e),u=ne(-a*n-c*s,e),l=f>i,p=u>i;if(l&&(f=e-f),p&&(u=e-u),f>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:f,k2neg:p,k2:u}}}},nn),n4=BigInt(0);var o4=Br.ProjectivePoint;function dp(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function hp(t,e,r){let n=Sn.digest(r instanceof Uint8Array?r:r.subarray());if(dp(n))return n.then(({digest:o})=>Br.verify(e,o,t)).catch(o=>{throw new to(String(o))});try{return Br.verify(e,n.digest,t)}catch(o){throw new to(String(o))}}var oi=class{type="secp256k1";raw;_key;constructor(e){this._key=mp(e),this.raw=pp(this._key)}toMultihash(){return Ke.digest(ss(this))}toCID(){return A.createV1(114,this.toMultihash())}toString(){return se.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:qe(this.raw,e.raw)}verify(e,r){return hp(this._key,r,e)}};function eu(t){return new oi(t)}function pp(t){return Br.ProjectivePoint.fromHex(t).toRawBytes(!0)}function mp(t){try{return Br.ProjectivePoint.fromHex(t),t}catch(e){throw new Wr(String(e))}}function gp(t){let{Type:e,Data:r}=wt.decode(t),n=r??new Uint8Array;switch(e){case me.RSA:return Jc(n);case me.Ed25519:return Sc(n);case me.secp256k1:return eu(n);default:throw new Jr}}function yp(t){let{Type:e,Data:r}=wt.decode(t.digest),n=r??new Uint8Array;switch(e){case me.Ed25519:return Sc(n);case me.secp256k1:return eu(n);default:throw new Jr}}function ss(t){return wt.encode({Type:me[t.type],Data:t.raw})}var wp=Symbol.for("nodejs.util.inspect.custom"),$1=114,oo=class{type;multihash;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[ic]=!0;toString(){return this.string==null&&(this.string=se.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return A.createV1($1,this.multihash)}toJSON(){return this.toString()}equals(e){if(e==null)return!1;if(e instanceof Uint8Array)return qe(this.multihash.bytes,e);if(typeof e=="string")return this.toString()===e;if(e?.toMultihash()?.bytes!=null)return qe(this.multihash.bytes,e.toMultihash().bytes);throw new Error("not valid Id")}[wp](){return`PeerId(${this.toString()})`}},si=class extends oo{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},ii=class extends oo{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.publicKey}},ai=class extends oo{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.publicKey}},j1=2336,ci=class{type="url";multihash;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=Ke.digest(te(this.url))}[wp](){return`PeerId(${this.url})`}[ic]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return A.createV1(j1,this.toMultihash())}toJSON(){return this.toString()}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=ee(e)),e.toString()===this.toString())}};function ge(t,e){let r;if(t.charAt(0)==="1"||t.charAt(0)==="Q")r=ir(se.decode(`z${t}`));else{if(e==null)throw new ue('Please pass a multibase decoder for strings that do not start with "1" or "Q"');r=ir(e.decode(t))}return z1(r)}function z1(t){if(K1(t))return new si({multihash:t});if(q1(t))try{let e=yp(t);if(e.type==="Ed25519")return new ii({multihash:t,publicKey:e});if(e.type==="secp256k1")return new ai({multihash:t,publicKey:e})}catch{let r=ee(t.digest);return new ci(new URL(r))}throw new Vo("Supplied PeerID Multihash is invalid")}function q1(t){return t.code===Ke.code}function K1(t){return t.code===Sn.code}function ui(t){return async function(r={}){let n=await t.post("bitswap/stat",{searchParams:h(r),signal:r.signal,headers:r.headers});return G1(await n.json())}}function G1(t){return{provideBufLen:t.ProvideBufLen??0,wantlist:(t.Wantlist??[]).map(e=>A.parse(e["/"])),peers:(t.Peers??[]).map(e=>ge(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}function xp(t){return async function(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:h({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(s=>A.parse(s["/"]))}}function bp(t){return async function(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Keys??[]).map(o=>A.parse(o["/"]))}}function tu(t){return{wantlist:bp(t),wantlistForPeer:xp(t),stat:ui(t)}}function li(t){return async function(r,n={}){let o=await t.post("block/get",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function vp(t){return async function e(r,n={}){let o=new AbortController,s=be([o.signal,n.signal]),i;try{i=await(await t.post("block/put",{signal:s,searchParams:h(n),...await Ie([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await e(r,{...n,format:"cbor"});throw a}finally{s.clear()}return A.parse(i.Key)}}function Ep(t){return async function*(r,n={}){Array.isArray(r)||(r=[r]);let o=await t.post("block/rm",{signal:n.signal,searchParams:h({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield W1(s)}}function W1(t){let e={cid:A.parse(t.Hash)};return t.Error!=null&&(e.error=new Error(t.Error)),e}function Bp(t){return async function(r,n={}){let s=await(await t.post("block/stat",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:A.parse(s.Key),size:s.Size}}}function ru(t){return{get:li(t),put:vp(t),rm:Ep(t),stat:Bp(t)}}function Ap(t){return async function(r,n={}){let o=await t.post("bootstrap/add",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>re(i))}}}function Sp(t){return async function(r={}){let n=await t.post("bootstrap/list",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>re(s))}}}function kp(t){return async function(r,n={}){let o=await t.post("bootstrap/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>re(i))}}}function nu(t){return{add:Ap(t),list:Sp(t),rm:kp(t)}}function Cp(t){return async function*(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function Ip(t){return async function(r={}){return(await t.post("commands",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function Up(t){return async function(r={}){return await(await t.post("config/show",{signal:r.signal,searchParams:h({...r}),headers:r.headers})).json()}}function Tp(t){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json()).Value}}function Np(t){return async function(r,n={}){let s=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function Pp(t){return{apply:Np(t)}}function Rp(t){return async function(r,n={}){let o=new AbortController,s=be([o.signal,n.signal]);try{await(await t.post("config/replace",{signal:s,searchParams:h(n),...await Ie([te(JSON.stringify(r))],o,n.headers)})).text()}finally{s.clear()}}}function _p(t){return async function(r,n,o={}){if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...J1(r,n)};await(await t.post("config",{signal:o.signal,searchParams:h(s),headers:o.headers})).text()}}function J1(t,e){switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}function ou(t){return{getAll:Up(t),get:Tp(t),set:_p(t),replace:Rp(t),profiles:Pp(t)}}function Lp(t){return async function*(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:h({arg:r.toString()}),headers:n.headers})).iterator()}}var Op=Mt(Vn(),1);function Z1(t){return t[Symbol.asyncIterator]!=null}function X1(t){if(Z1(t))return(async()=>{for await(let e of t)return e})();for(let e of t)return e}var Dp=X1;var su=Mt(Vn(),1);async function*iu(t,e,r,n,o){let s=async f=>{let u=await r.getCodec(f.code),l=await n(f,o);return u.decode(l)},i=e.split("/").filter(Boolean),a=await s(t),c=t;for(;i.length>0;){let f=i.shift();if(f==null)throw(0,su.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,f))a=a[f],yield{value:a,remainderPath:i.join("/")};else throw(0,su.default)(new Error(`no link named "${f}" under ${c}`),"ERR_NO_LINK");let u=A.asCID(a);u!=null&&(c=u,a=await s(a))}yield{value:a,remainderPath:""}}function Vp(t,e){let r=li(t);return async function(o,s={}){if(s.path!=null){let u=s.localResolve===!0?await Dp(iu(o,s.path,e,r,s)):await Gt(iu(o,s.path,e,r,s));if(u==null)throw(0,Op.default)(new Error("Not found"),"ERR_NOT_FOUND");return u}let i=await e.getCodec(o.code),a=await r(o,s);return{value:i.decode(a),remainderPath:""}}}function Fp(t){return async function*(r,n={}){let o=new AbortController,s=be([o.signal,n.signal]);try{let{headers:i,body:a}=await Ie(r,o,n.headers),c=await t.post("dag/import",{signal:s,headers:i,body:a,searchParams:h({"pin-roots":n.pinRoots})});for await(let{Root:f}of c.ndjson())if(f!==void 0){let{Cid:{"/":u},PinErrorMsg:l}=f;yield{root:{cid:A.parse(u),pinErrorMsg:l}}}}finally{s.clear()}}}function Hp(t,e){return async function(n,o={}){let s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o},i;if(s.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else i=(await e.getCodec(s.storeCodec??"dag-cbor")).encode(n),s.inputCodec=s.storeCodec;let a=new AbortController,c=be([a.signal,s.signal]);try{let u=await(await t.post("dag/put",{timeout:s.timeout,signal:c,searchParams:h(s),...await Ie([i],a,s.headers)})).json();return A.parse(u.Cid["/"])}finally{c.clear()}}}function Mp(t){return async function(r,n={}){let s=await(await t.post("dag/resolve",{signal:n.signal,searchParams:h({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:A.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function au(t,e){return{export:Lp(t),get:Vp(t,e),import:Fp(t),put:Hp(t,e),resolve:Mp(t)}}function Xe(t){if(t.Type===0)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===1)return{from:ge(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses??[]).map(({ID:e,Addrs:r})=>({id:ge(e),multiaddrs:r.map(n=>re(n)),protocols:[]})),providers:(t.Responses??[]).map(({ID:e,Addrs:r})=>({id:ge(e),multiaddrs:r.map(n=>re(n)),protocols:[]}))};if(t.Type===2){let e={id:t.ID??ge(t.ID),multiaddrs:[],protocols:[]};return t.Responses?.length>0&&(e={id:ge(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(r=>re(r)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:e}}if(t.Type===3)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===4)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:e,Addrs:r})=>({id:ge(e),multiaddrs:r.map(n=>re(n)),protocols:[]}))};if(t.Type===5)return{name:"VALUE",type:t.Type,value:te(t.Extra,"base64pad")};if(t.Type===6){let e=t.Responses.map(({ID:r})=>ge(r));if(e.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(t.Type===7)return{name:"DIALING_PEER",type:t.Type,peer:ge(t.ID)};throw new Error("Unknown DHT event type")}function $p(t){return async function*(r,n={}){let o=await t.post("dht/query",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Xe(s)}}var cu;(function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"})(cu||(cu={}));var uu;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(uu||(uu={}));function lu(t){return{query:$p(t)}}function jp(t){return async function(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function zp(t){return async function(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function qp(t){return async function(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function fu(t){return{cmds:jp(t),net:zp(t),sys:qp(t)}}function Kp(t){return async function(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:o.signal,searchParams:h({arg:s.concat(n).map(a=>A.asCID(a)!=null?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}}function Gp(t){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return A.parse(s.Cid)}}function so(t){let e=W(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs??0},delete e.mtimeNsecs),e}function Jp(t){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");let o=await t.post("files/ls",{signal:n.signal,searchParams:h({arg:A.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries??[])yield Wp(so(i));else yield Wp(so(s))}}function Wp(t){return t.hash!=null&&(t.cid=A.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}function Zp(t){return async function(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).text()}}function Xp(t){return async function(r,n,o={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:o.signal,searchParams:h({arg:r.concat(n),...o}),headers:o.headers})).text()}}function du(t){if(Q1(t))return(async function*(){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}})();if(Y1(t))return t;throw new Error("unknown stream")}function Y1(t){return t[Symbol.asyncIterator]!=null}function Q1(t){return typeof t?.getReader=="function"}function Yp(t){return async function*(r,n={}){let o=await t.post("files/read",{signal:n.signal,searchParams:h({arg:r,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*du(o.body)}}function Qp(t){return async function(r,n={}){let o=await t.post("files/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new Lo(o);throw i.message=s,i}}}function fi(t){return async function(r,n={}){let s=await(await t.post("files/stat",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality??!1,e2(so(s))}}function e2(t){return t.cid=A.parse(t.hash),delete t.hash,t}function em(t){return async function(r,n,o={}){let s=new AbortController,i=be([s.signal,o.signal]);try{await(await t.post("files/write",{signal:i,searchParams:h({arg:r,streamChannels:!0,count:o.length,...o}),...await Ie([{content:n,path:"arg",mode:Zr(o.mode),mtime:Kt(o.mtime)}],s,o.headers)})).text()}finally{i.clear()}}}function hu(t){return{cp:Kp(t),flush:Gp(t),ls:Jp(t),mkdir:Zp(t),mv:Xp(t),read:Yp(t),rm:Qp(t),stat:fi(t),write:em(t)}}function tm(t){return function(){let r=new URL(t.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function rm(t){return async function*(r,n={}){let o={arg:`${r instanceof Uint8Array?A.decode(r):r}`,...n};yield*(await t.post("get",{signal:n.signal,searchParams:h(o),headers:n.headers})).iterator()}}function di(t){return async function(r={}){let o=await(await t.post("id",{signal:r.signal,searchParams:h({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...W(o)};return s.id=ge(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(i=>re(i))),s}}function nm(t){let e=di(t);return async function(n={}){try{return!!(await e(n))?.addresses?.length}catch{return!1}}}var t2={type:"ed25519"};function om(t){return async function(r,n=t2){let s=await(await t.post("key/gen",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return W(s)}}function sm(t){return async function(r,n,o,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:h({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return W(a)}}function im(t){return async function(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Keys??[]).map(s=>W(s))}}function am(t){return async function(r,n,o={}){let s=await t.post("key/rename",{signal:o.signal,searchParams:h({arg:[r,n],...o}),headers:o.headers});return W(await s.json())}}function cm(t){return async function(r,n={}){let s=await(await t.post("key/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return W(s.Keys[0])}}function pu(t){return{gen:om(t),import:sm(t),list:im(t),rename:am(t),rm:cm(t)}}function r2(t,e){try{if(typeof t=="string"&&t.length>0)return n2(t);if(typeof t=="number"&&isFinite(t))return e?.long?s2(t):o2(t);throw new Error("Value is not a string or number.")}catch(r){let n=i2(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function n2(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");let e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;let r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*315576e5;case"weeks":case"week":case"w":return r*6048e5;case"days":case"day":case"d":return r*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return r*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return r*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return r*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}var pi=r2;function o2(t){let e=Math.abs(t);return e>=864e5?`${Math.round(t/864e5)}d`:e>=36e5?`${Math.round(t/36e5)}h`:e>=6e4?`${Math.round(t/6e4)}m`:e>=1e3?`${Math.round(t/1e3)}s`:`${t}ms`}function s2(t){let e=Math.abs(t);return e>=864e5?hi(t,e,864e5,"day"):e>=36e5?hi(t,e,36e5,"hour"):e>=6e4?hi(t,e,6e4,"minute"):e>=1e3?hi(t,e,1e3,"second"):`${t} ms`}function hi(t,e,r,n){let o=e>=r*1.5;return`${Math.round(t/r)} ${n}${o?"s":""}`}function i2(t){return typeof t=="object"&&t!==null&&"message"in t}function mu(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=pi,r.destroy=f,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let l=0;for(let p=0;p<u.length;p++)l=(l<<5)-l+u.charCodeAt(p),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(u){let l,p=null,b,g;function w(...m){if(!w.enabled)return;let v=w,k=Number(new Date),y=k-(l||k);v.diff=y,v.prev=l,v.curr=k,l=k,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let C=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(_,U)=>{if(_==="%%")return"%";C++;let T=r.formatters[U];if(typeof T=="function"){let P=m[C];_=T.call(v,P),m.splice(C,1),C--}return _}),r.formatArgs.call(v,m),(v.log||r.log).apply(v,m)}return w.namespace=u,w.useColors=r.useColors(),w.color=r.selectColor(u),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(b!==r.namespaces&&(b=r.namespaces,g=r.enabled(u)),g),set:m=>{p=m}}),typeof r.init=="function"&&r.init(w),w}function n(u,l){let p=r(this.namespace+(typeof l>"u"?":":l)+u);return p.log=this.log,p}function o(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l,p=(typeof u=="string"?u:"").split(/[\s,]+/),b=p.length;for(l=0;l<b;l++)p[l]&&(u=p[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),u}function i(u){if(u[u.length-1]==="*")return!0;let l,p;for(l=0,p=r.skips.length;l<p;l++)if(r.skips[l].test(u))return!1;for(l=0,p=r.names.length;l<p;l++)if(r.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var mi=h2(),a2=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function c2(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function u2(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+pi(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}var l2=console.debug??console.log??(()=>{});function f2(t){try{t?mi?.setItem("debug",t):mi?.removeItem("debug")}catch{}}function d2(){let t;try{t=mi?.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=globalThis.process.env.DEBUG),t}function h2(){try{return localStorage}catch{}}function p2(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var um=mu({formatArgs:u2,save:f2,load:d2,useColors:c2,setupFormatters:p2,colors:a2,storage:mi,log:l2});var Fe=um;Fe.formatters.b=t=>t==null?"undefined":se.baseEncode(t);Fe.formatters.t=t=>t==null?"undefined":et.baseEncode(t);Fe.formatters.m=t=>t==null?"undefined":Ur.baseEncode(t);Fe.formatters.p=t=>t==null?"undefined":t.toString();Fe.formatters.c=t=>t==null?"undefined":t.toString();Fe.formatters.k=t=>t==null?"undefined":t.toString();Fe.formatters.a=t=>t==null?"undefined":t.toString();Fe.formatters.e=t=>t==null?"undefined":lm(t.stack)??lm(t.message)??t.toString();function m2(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function fn(t){let e=m2(`${t}:trace`);return Fe.enabled(`${t}:trace`)&&Fe.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=Fe(`${t}:trace`)),Object.assign(Fe(t),{error:Fe(`${t}:error`),trace:e})}function lm(t){if(t!=null&&(t=t.trim(),t.length!==0))return t}var xm=Mt(wm(),1),wi=xm.default;var J=Object.create(null),bm=6e4,vm=bm*60,yu=vm*24,Em=yu*365.25;J.year=J.yr=J.y=Em;J.month=J.mo=J.mth=Em/12;J.week=J.wk=J.w=yu*7;J.day=J.d=yu;J.hour=J.hr=J.h=vm;J.minute=J.min=J.m=bm;J.second=J.sec=J.s=1e3;J.millisecond=J.millisec=J.ms=1;J.microsecond=J.microsec=J.us=J.\u00B5s=.001;J.nanosecond=J.nanosec=J.ns=1e-6;J.group=",";J.decimal=".";J.placeholder=" _";var Bm=J;var v2=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Ye.unit=Bm;function Ye(t="",e="ms"){let r=null,n;return String(t).replace(new RegExp(`(\\d)[${Ye.unit.placeholder}${Ye.unit.group}](\\d)`,"g"),"$1$2").replace(Ye.unit.decimal,".").replace(v2,(o,s,i)=>{if(i)i=i.toLowerCase();else if(n){for(let a in Ye.unit)if(Ye.unit[a]<n){i=a;break}}else i=e;n=i=Ye.unit[i]||Ye.unit[i.replace(/s$/,"")],i&&(r=(r||0)+s*i)}),r&&r/(Ye.unit[e]||1)*(t[0]==="-"?-1:1)}var Am=()=>{};var mn=Mt(Nm(),1);var pn=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}},xi=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}},ao=class extends Error{response;constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};var Pm=globalThis.fetch,co=globalThis.Headers,bu=globalThis.Request,vu=globalThis.Response;var N2=async(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method??"GET",t.toString(),!0);let{timeout:n,headers:o}=e,s=Number(n);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),o!=null)for(let[i,a]of new co(o))r.setRequestHeader(i,a);return e.signal!=null&&(e.signal.onabort=()=>{r.abort()}),e.onUploadProgress!=null&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((i,a)=>{let c=f=>{switch(f.type){case"error":{i(vu.error());break}case"load":{i(new Eu(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:R2(r.getAllResponseHeaders())}));break}case"timeout":{a(new pn);break}case"abort":{a(new xi);break}default:break}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(e.body)})},P2=Pm,Rm=(t,e={})=>e.onUploadProgress!=null?N2(t,e):P2(t,e),R2=t=>{let e=new co;for(let r of t.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e},Eu=class extends vu{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}};var _m=wi.bind({ignoreUndefined:!0}),bi=fn("kubo-rpc-client:fetch"),_2={throwHttpErrors:!0,credentials:"same-origin"},dt=class t{static HTTPError=ao;static TimeoutError=pn;static post=async(e,r)=>new t(r).post(e,r);static get=async(e,r)=>new t(r).get(e,r);static put=async(e,r)=>new t(r).put(e,r);static delete=async(e,r)=>new t(r).delete(e,r);static options=async(e,r)=>new t(r).options(e,r);opts;constructor(e={}){this.opts=_m({},_2,e)}async fetch(e,r={}){let n=_m({},this.opts,r),o=new co(n.headers);if(typeof e!="string"&&!(e instanceof mn.URL||e instanceof bu))throw new TypeError("`resource` must be a string, URL, or Request");let s=new mn.URL(e.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i!=null&&(typeof a=="function"?s.search=a(new mn.URLSearchParams(n.searchParams)):s.search=new mn.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let f=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&f.push(AbortSignal.timeout(n.timeout));let u=be(f);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Kr||Gr)&&(n.body=new Blob(await Fo(kt(n.body)))),bi.trace("outgoing headers",n.headers),bi.trace("%s %s",n.method,s);let l=await Rm(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(bi("%s %s %d",n.method,s,l.status),bi.trace("incoming headers",l.headers),!l.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(l),new ao(l);return l.iterator=async function*(){yield*D2(l.body)},l.ndjson=async function*(){for await(let p of L2(l.iterator()))r.transform!=null?yield r.transform(p):yield p},l}finally{u.clear()}}async post(e,r={}){return this.fetch(e,{...r,method:"POST"})}async get(e,r={}){return this.fetch(e,{...r,method:"GET"})}async put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}async delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}async options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},L2=async function*(t){let e=new TextDecoder,r="";for await(let n of t){r+=e.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},D2=t=>{if(O2(t))return t;if(F2(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(V2(t)){let e=t.getReader();return(async function*(){try{for(;;){let{done:r,value:n}=await e.read();if(r)return;n!=null&&(yield n)}}finally{e.releaseLock()}})()}throw new TypeError("Body can't be converted to AsyncIterable")},O2=t=>t!==null&&typeof t[Symbol.asyncIterator]=="function",V2=t=>t!=null&&typeof t.getReader=="function",F2=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");var H2=[j("tcp").code,j("dns").code,j("dnsaddr").code,j("dns4").code,j("dns6").code];function Lm(t){return Vm("sni",t)?.[1]}function Dm(t){let e=Vm("tcp",t)?.[1];return e==null?"":`:${e}`}function Vm(t,e){let r;try{r=j(t).code}catch{return}for(let[n,o]of e)if(n===r&&o!=null)return[n,o]}function Om(t){return t.some(([e,r])=>e===j("tls").code)}function ht(t,e,r){let n=Fm[j(t).name];if(n==null)throw new Error(`Can't interpret protocol ${j(t).name}`);let o=n(e,r);return t===j("ip6").code?`[${o}]`:o}var Fm={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${ht(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${ht(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${ht(r[0],r[1]??"",e)}`},p2p:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${ht(r[0],r[1]??"",e)}`},http:(t,e)=>{let r=Om(e),n=Lm(e),o=Dm(e);if(r&&n!=null)return`https://${n}${o}`;let s=r?"https://":"http://",i=e.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=ht(i[0],i[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},"http-path":(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=ht(r[0],r[1]??"",e),o=decodeURIComponent(t);return`${n}/${o}`},tls:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return ht(r[0],r[1]??"",e)},sni:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return ht(r[0],r[1]??"",e)},https:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=ht(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{let r=Om(e),n=Lm(e),o=Dm(e);if(r&&n!=null)return`wss://${n}${o}`;let s=r?"wss://":"ws://",i=e.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=ht(i[0],i[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},wss:(t,e)=>{let r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=ht(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`}};function Hm(t,e){let n=re(t).stringTuples(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let s=j(o[0]),i=Fm[s.name];if(i==null)throw new Error(`No interpreter found for ${s.name}`);let a=i(o[1]??"",n);return e?.assumeHttp!==!1&&H2.includes(o[0])&&(a=a.replace(/^.*:\/\//,""),o[1]==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function Bu(t){try{t=Hm(re(t))}catch{}return t=t.toString(),t}var Mm=fn("js-kubo-rpc-client:lib:error-handler"),M2=wi.bind({ignoreUndefined:!0}),$2=Kr||Gr?location.protocol:"http",j2=Kr||Gr?location.hostname:"localhost",z2=Kr||Gr?location.port:"5001",q2=(t={})=>{let e,r={},n;if(typeof t=="string"||lr(t))e=new URL(Bu(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||lr(t.url))e=new URL(Bu(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t??{};let o=(r.protocol??$2).replace(":",""),s=(r.host??j2).split(":")[0],i=r.port??z2;e=new URL(`${o}://${s}:${i}`)}if(r.apiPath!=null?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),bd){let o=Am(e);n=r.agent??new o({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},K2=async t=>{let e;try{if((t.headers.get("Content-Type")??"").startsWith("application/json")){let n=await t.json();Mm(n),e=n.Message??n.message}else e=await t.text()}catch(n){Mm("Failed to parse error response",n),e=n.message}let r=new dt.HTTPError(t);throw e!=null&&(e.includes("deadline has elapsed")&&(r=new dt.TimeoutError),e.includes("context deadline exceeded")&&(r=new dt.TimeoutError),e.includes("request timed out")&&(r=new dt.TimeoutError),r.message=e),r},G2=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,$m=t=>t.replace(G2,function(e){return"-"+e.toLowerCase()}),W2=t=>typeof t=="string"?Ye(t)??0:t,vi=class extends dt{constructor(e={}){let r=q2(e);super({timeout:r.timeout!=null?W2(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:K2,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&i!=="timeout"&&s.append($m(i),a),i==="timeout"&&!isNaN(parseInt(a))&&s.append($m(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=async(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,M2(s,{method:"POST"})))}},$U=dt.HTTPError;var J2=async t=>Promise.reject(new Error(`No base found for "${t}"`)),Ei=class{_basesByName;_basesByPrefix;_loadBase;constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??J2;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]!=null&&this._basesByPrefix[e.prefix]!=null)throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e]!=null)return this._basesByName[e];if(this._basesByPrefix[e]!=null)return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var Z2=async t=>Promise.reject(new Error(`No codec found for "${t}"`)),Bi=class{_codecsByName;_codecsByCode;_loadCodec;constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??Z2;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]!=null||this._codecsByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e]!=null)return r[e];let n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var X2=async t=>Promise.reject(new Error(`No hasher found for "${t}"`)),Ai=class{_hashersByName;_hashersByCode;_loadHasher;constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??X2;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]!=null||this._hashersByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e]!=null)return r[e];let n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};function jm(t){return async function(e,r,n={}){let o=await t.post("log/level",{signal:n.signal,searchParams:h({arg:[e,r],...n}),headers:n.headers});return W(await o.json())}}function zm(t){return async function(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Strings}}function qm(t){return async function*(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:h(r),headers:r.headers})).ndjson()}}function Au(t){return{level:jm(t),ls:zm(t),tail:qm(t)}}function Km(t){return async function*(r,n={}){let o=`${r instanceof Uint8Array?A.decode(r):r}`;async function s(a){let c=a.Hash;if(c.includes("/")===!0){let u=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await fi(t)(u)).cid}else c=A.parse(c);return{name:a.Name,path:o+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:Y2(a)}}let i=await t.post("ls",{signal:n.signal,searchParams:h({arg:o,...n}),headers:n.headers});for await(let a of i.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");let c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield s(a);return}yield*c.map(s)}}}function Y2(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Gm(t){return async function(r={}){let n=await t.post("dns",{signal:r.signal,searchParams:h(r),headers:r.headers});return W(await n.json())}}function Wm(t){return async function(r,n={}){let o=await t.post("name/publish",{signal:n.signal,searchParams:h({arg:`${r}`,...n}),headers:n.headers});return W(await o.json())}}function Jm(t){return async function(r,n={}){let o=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers});return W(await o.json())}}function Zm(t){return async function(r={}){let n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:h(r),headers:r.headers});return W(await n.json())}}function Xm(t){return async function(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Strings??[]}}function Ym(t){return{cancel:Jm(t),state:Zm(t),subs:Xm(t)}}function Qm(t){return async function*(r,n={}){let o=await t.post("name/resolve",{signal:n.signal,searchParams:h({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}}function Su(t){return{publish:Wm(t),resolve:Qm(t),pubsub:Ym(t)}}function e0(t){return async function(r,n,o={}){let s=await t.post("object/patch/add-link",{signal:o.signal,searchParams:h({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return A.parse(i)}}function t0(t){return async function(r,n,o={}){let s=await t.post("object/patch/rm-link",{signal:o.signal,searchParams:h({arg:[`${r}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return A.parse(i)}}function r0(t){return{addLink:e0(t),rmLink:t0(t)}}function ku(t,e){return{patch:r0(t)}}function Q2(t){return Symbol.iterator in t}function ev(t){return Symbol.asyncIterator in t}function tv(t){return A.asCID(t)!=null}async function*ki(t){if(t==null)throw new ue(`Unexpected input: ${t}`);let e=A.asCID(t);if(e!=null){yield Ar({cid:e});return}if(typeof t=="string"){yield Ar({path:t});return}if(t.cid!=null||t.path!=null)return yield Ar(t);if(Q2(t)){let r=t[Symbol.iterator](),n=r.next();if(n.done===!0)return r;yield Ar(Si(n.value));for(let o of r)yield Ar(Si(o));return}if(ev(t)){let r=t[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;yield Ar(Si(n.value));for await(let o of r)yield Ar(Si(o));return}throw new ue(`Unexpected input: ${typeof t}`)}function Si(t){if(tv(t))return{cid:t};if(typeof t=="string")return{path:t};if(typeof t=="object"&&(t.cid!=null||t.path!=null))return t;throw new ue(`Unexpected input: ${typeof t}`)}function Ar(t){let e=t.cid??(t.path!=null?`${t.path}`:void 0);if(e==null)throw new ue("Unexpected input: Please pass either a CID or an IPFS path");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),t.name!=null&&(r.name=t.name),r}function Ci(t){return async function*(r,n={}){for await(let{path:o,recursive:s,metadata:i,name:a}of ki(r)){let c=await t.post("pin/add",{signal:n.signal,searchParams:h({...n,arg:o.toString(),recursive:s,metadata:i!=null?JSON.stringify(i):void 0,name:a??n.name,stream:!0}),headers:n.headers});for await(let f of c.ndjson()){if(f.Pins!=null){for(let u of f.Pins)yield A.parse(u);continue}yield A.parse(f)}}}}function n0(t){let e=Ci(t);return async function(n,o={}){let s=await Gt(e([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function o0(t,e,r,n){let o={type:t,cid:A.parse(e)};return r!=null&&(o.metadata=r),n!=null&&(o.name=n),o}function s0(t){return async function*(r={}){let n=[];if(r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]),r.name!=null&&r.names===!1)throw new Error("Cannot use name filter when names is explicitly set to false");if(r.name==="")throw new Error("Name filter cannot be empty string");let o=r.names??r.name!=null,s=await t.post("pin/ls",{signal:r.signal,searchParams:h({...r,arg:n.map(i=>`${i}`),names:o,stream:!0}),headers:r.headers});for await(let i of s.ndjson()){if(i.Keys!=null){for(let a of Object.keys(i.Keys))yield o0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield o0(i.Type,i.Cid,i.Metadata,i.Name)}}}var Ii=({Name:t,Status:e,Cid:r})=>({cid:A.parse(r),name:t,status:e}),i0=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},a0=t=>{if(A.asCID(t)!=null)return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},gn=({service:t,cid:e,name:r,status:n,all:o})=>{let s=h({service:i0(t),name:r,force:o===!0?!0:void 0});if(e!=null)for(let i of e)s.append("cid",a0(i));if(n!=null)for(let i of n)s.append("status",i);return s},c0=(t,{service:e,background:r,name:n,origins:o})=>{let s=h({arg:a0(t),service:i0(e),name:n,background:r===!0?!0:void 0});if(o!=null)for(let i of o)s.append("origin",i.toString());return s};function u0(t){return async function(r,{timeout:n,signal:o,headers:s,...i}){let a=await t.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:c0(r,i)});return Ii(await a.json())}}function l0(t){return async function*({timeout:r,signal:n,headers:o,...s}){let i=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:gn(s)});for await(let a of i.ndjson())yield Ii(a)}}function f0(t){return async function({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:gn({...s,all:!0})})}}function d0(t){return async function({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:gn({...s,all:!1})})}}function h0(t){let e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function p0(t){let e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return t.Stat!=null&&(e.stat=rv(t.Stat)),e}function rv(t){switch(t.Status){case"valid":{let{Pinning:e,Pinned:r,Queued:n,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function m0(t){return async function(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:h({arg:[r,h0(o),s]}),headers:i})}}function g0(t){return async function(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r;return(await(await t.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?h({stat:n}):void 0})).json()).RemoteServices.map(p0)}}function y0(t){return async function(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:h({arg:r})})}}function w0(t){return{add:m0(t),ls:g0(t),rm:y0(t)}}function x0(t){return{add:u0(t),ls:l0(t),rm:d0(t),rmAll:f0(t),service:w0(t)}}function Ui(t){return async function*(r,n={}){for await(let{path:o,recursive:s}of ki(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:h({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(f=>A.parse(f));continue}yield A.parse(c)}}}}function b0(t){let e=Ui(t);return async function(n,o={}){let s=await Gt(e([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function v0(t){return async function(r,n,o={}){let s=await t.post("pin/update",{signal:o.signal,searchParams:h({...o,arg:[r.toString(),n.toString()]}),headers:o.headers}),{Pins:i}=await s.json();return i.map(a=>A.parse(a))}}function Cu(t){return{addAll:Ci(t),add:n0(t),ls:s0(t),rmAll:Ui(t),rm:b0(t),update:v0(t),remote:x0(t)}}function E0(t){return async function*(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:h({arg:`${r}`,...n}),headers:n.headers,transform:W})).ndjson()}}var B0=t=>Array.isArray(t)?t.map(Ti):t,Ti=t=>ee(yn(t)),yn=t=>An.decode(t),A0=t=>BigInt(`0x${ee(An.decode(t),"base16")}`),wn=t=>An.encode(te(t));function S0(t){return async function(r={}){let{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:h(r),headers:r.headers})).json();return B0(n)??[]}}function k0(t){return async function(r,n={}){let o=await t.post("pubsub/peers",{signal:n.signal,searchParams:h({arg:wn(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function C0(t){return async function(r,n,o={}){let s=h({arg:wn(r),...o}),i=new AbortController,a=be([i.signal,o.signal]);try{await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await Ie([n],i,o.headers)})).text()}finally{a.clear()}}}var nv=fn("js-kubo-rpc-client:pubsub:subscribe");function I0(t,e){return async function(n,o,s={}){s.signal=e.subscribe(n,o,s.signal);let i,a,c=new Promise((u,l)=>{i=u,a=l}),f=setTimeout(()=>{i()},1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:h({arg:wn(n),...s}),headers:s.headers}).catch(u=>{e.unsubscribe(n,o),a(u)}).then(u=>{clearTimeout(f),u!=null&&(ov(u,{onMessage:l=>{if(o!=null){if(typeof o=="function"){o(l);return}typeof o.handleEvent=="function"&&o.handleEvent(l)}},onEnd:()=>{e.unsubscribe(n,o)},onError:s.onError}),i())}),c}}async function ov(t,{onMessage:e,onEnd:r,onError:n}){n=n??nv;try{for await(let o of t.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?e({type:"signed",from:ge(o.from),data:yn(o.data),sequenceNumber:A0(o.seqno),topic:Ti(o.topicIDs[0]),key:o.key!=null?gp(yn(o.key??"u")):void 0,signature:yn(o.signature??"u")}):e({type:"unsigned",data:yn(o.data),topic:Ti(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){sv(o)||n(o,!0)}finally{r()}}var sv=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};var Ni=class{_subs;constructor(){this._subs=new Map}subscribe(e,r,n){let o=this._subs.get(e)??[];if(o.find(i=>i.handler===r)!=null)throw new Error(`Already subscribed to ${e} with this handler`);let s=new AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(o)),n?.addEventListener("abort",()=>{this.unsubscribe(e,r)}),s.signal}unsubscribe(e,r){let n=this._subs.get(e)??[],o;r!=null?(this._subs.set(e,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(e,[]),o=n),(this._subs.get(e)??[]).length===0&&this._subs.delete(e),o.forEach(s=>{s.controller.abort()})}};function U0(t,e){return async function(n,o){e.unsubscribe(n,o)}}function Iu(t){let e=new Ni;return{ls:S0(t),peers:k0(t),publish:C0(t),subscribe:I0(t,e),unsubscribe:U0(t,e)}}function T0(t){return async function*(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:W,searchParams:h(r),headers:r.headers})).ndjson()}}function Uu(t){async function*e(r,n={}){let o=Array.isArray(r)?r:[r];yield*(await t.post("refs",{signal:n.signal,searchParams:h({arg:o.map(i=>`${i instanceof Uint8Array?A.decode(i):i}`),...n}),headers:n.headers,transform:W})).ndjson()}return Object.assign(e,{local:T0(t)})}function N0(t){return async function*(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:h(r),headers:r.headers,transform:o=>({err:o.Error!=null?new Error(o.Error):null,cid:o.Key?.["/"]!=null?A.parse(o.Key["/"]):null})})).ndjson()}}function Pi(t){return async function(r={}){let o=await(await t.post("repo/stat",{signal:r.signal,searchParams:h(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function P0(t){return async function(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Version}}function Tu(t){return{gc:N0(t),stat:Pi(t),version:P0(t)}}function R0(t){return async function(r,n={}){let o=await t.post("resolve",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}}function _0(t){return async function*(r,n={}){let o=await t.post("routing/findpeer",{signal:n.signal,searchParams:h({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield Xe(s)}}function L0(t){return async function*(r,n={}){let o=await t.post("routing/findprovs",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Xe(s)}}function D0(t){return async function*(r,n={}){let o=await t.post("routing/get",{signal:n.signal,searchParams:h({arg:r instanceof Uint8Array?ee(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Xe(s)}}function O0(t){return async function*(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await t.post("routing/provide",{signal:n.signal,searchParams:h({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield Xe(i)}}function V0(t){return async function*(r,n,o={}){let s=new AbortController,i=be([s.signal,o.signal]);try{let a=await t.post("routing/put",{signal:i,searchParams:h({arg:r instanceof Uint8Array?ee(r):r.toString(),stream:!0,...o}),...await Ie([n],s,o.headers)});for await(let c of a.ndjson())yield Xe(c)}finally{i.clear()}}}function Nu(t){return{findPeer:_0(t),findProvs:L0(t),get:D0(t),provide:O0(t),put:V0(t)}}function F0(t){return async function*(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:h(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function Pu(t){return{bitswap:ui(t),repo:Pi(t),bw:F0(t)}}function H0(t){return async function(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:h(r),headers:r.headers})).text()}}function M0(t){return async function(r={}){let n=await t.post("swarm/addrs",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:ge(s),addrs:(o[s]??[]).map(i=>re(i))}))}}function $0(t){return async function(r,n={}){let o=await t.post("swarm/connect",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function j0(t){return async function(r,n={}){let o=await t.post("swarm/disconnect",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function z0(t){return async function(r={}){let n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Strings:o}=await n.json();return(o??[]).map(s=>re(s))}}function q0(t){return async function(r={}){return((await(await t.post("swarm/peers",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Peers??[]).map(s=>({addr:re(s.Addr),peer:ge(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound",identify:s.Identify}))}}function Ru(t){return{addrs:M0(t),connect:$0(t),disconnect:j0(t),localAddrs:z0(t),peers:q0(t)}}function K0(t){return async function(r={}){let n=await t.post("version",{signal:r.signal,searchParams:h(r),headers:r.headers});return{...W(await n.json()),"ipfs-http-client":"1.0.0"}}}var _u=class{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(e){let r=new vi(e),n={name:Ke.name,code:Ke.code,encode:a=>a,decode:a=>a},o=Object.values(cr);(e.ipld?.bases??[]).forEach(a=>o.push(a)),this.bases=new Ei({bases:o,loadBase:e.ipld?.loadBase});let s=Object.values(cl);[Ka,Po,Ma,rc,n].concat(e.ipld?.codecs??[]).forEach(a=>{s.push(a)}),this.codecs=new Bi({codecs:s,loadCodec:e.ipld?.loadCodec});let i=Object.values(al);(e.ipld?.hashers??[]).forEach(a=>i.push(a)),this.hashers=new Ai({hashers:i,loadHasher:e.ipld?.loadHasher}),this.bitswap=tu(r),this.block=ru(r),this.bootstrap=nu(r),this.config=ou(r),this.dag=au(r,this.codecs),this.dht=lu(r),this.diag=fu(r),this.files=hu(r),this.key=pu(r),this.log=Au(r),this.name=Su(r),this.object=ku(r,this.codecs),this.pin=Cu(r),this.pubsub=Iu(r),this.refs=Uu(r),this.repo=Tu(r),this.routing=Nu(r),this.stats=Pu(r),this.swarm=Ru(r),this.add=Id(r),this.addAll=$o(r),this.cat=Cp(r),this.get=rm(r),this.ls=Km(r),this.id=di(r),this.version=K0(r),this.stop=H0(r),this.ping=E0(r),this.resolve=R0(r),this.commands=Ip(r),this.mount=Gm(r),this.isOnline=nm(r),this.getEndpointConfig=tm(r)}};function G0(t){return new _u(t)}function iv(t={}){return(typeof t=="string"||lr(t)||t instanceof URL)&&(t={url:t}),G0(t)}function av(t,e){return{path:decodeURIComponent(new URL(t).pathname.split("/").pop()??""),content:W0(t,e)}}async function*W0(t,e){yield*(await dt.get(t,e)).iterator()}return cg(cv);})();
/*! Bundled license information:

pvtsutils/build/index.js:
  (*!
   * MIT License
   * 
   * Copyright (c) 2017-2024 Peculiar Ventures, LLC
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

pvutils/build/utils.es.js:
  (*!
   Copyright (c) Peculiar Ventures, LLC
  *)

asn1js/build/index.es.js:
  (*!
   * Copyright (c) 2014, GMO GlobalSign
   * Copyright (c) 2015-2022, Peculiar Ventures
   * All rights reserved.
   * 
   * Author 2014-2019, Yury Strozhevsky
   * 
   * Redistribution and use in source and binary forms, with or without modification,
   * are permitted provided that the following conditions are met:
   * 
   * * Redistributions of source code must retain the above copyright notice, this
   *   list of conditions and the following disclaimer.
   * 
   * * Redistributions in binary form must reproduce the above copyright notice, this
   *   list of conditions and the following disclaimer in the documentation and/or
   *   other materials provided with the distribution.
   * 
   * * Neither the name of the copyright holder nor the names of its
   *   contributors may be used to endorse or promote products derived from
   *   this software without specific prior written permission.
   * 
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   * 
   *)
*/
return KuboRpcClient}));
//# sourceMappingURL=index.min.js.map
